# Посібник користувача

**Останнє оновлення:** 9 листопада 2025
**Аудиторія:** Кінцеві користувачі

---

## Зміст

1. [Початок роботи](#початок-роботи)
2. [Довідник конфігурації](#довідник-конфігурації)
3. [Усунення неполадок](#усунення-неполадок)
4. [Найкращі практики](#найкращі-практики)

---

# Початок роботи

## Що таке Автоматизація?

Автоматизація в Task Tracker зменшує ручну роботу, автоматично обробляючи затвердження версій на основі налаштованих правил. Замість того, щоб вручну переглядати кожну пропозицію версії, система вчиться, що робить хорошу версію, і автоматично обробляє очевидні випадки.

Подумайте про це як на налаштування фільтра в електронній пошті—ви повідомляєте системі "листи від моєї команди йдуть до цієї папки" і вона працює автоматично. У Task Tracker автоматизація ви повідомляєте системі "версії з впевненістю 80%+ і схожістю 70%+ гарні" і вона затверджує їх автоматично.

**Основні переваги:**
- Заощадьте 30-60 хвилин на день на ручне затвердження
- Зменшіть людські помилки в повторювальних рішеннях
- Прискорите робочі процеси управління знаннями
- Підтримуйте якість через налаштовані пороги

## Налаштування за 5 хвилин

### Крок 1: Доступ до навчального майстра

Перейдіть до своєї панелі приладів Task Tracker. На лівій бічній панелі знайдіть **Параметри** → **Налаштування автоматизації**.

Клацніть **Запустити майстер автоматизації** для початку.

**Що ви побачите:**
- Екран ласки, що пояснює переваги автоматизації
- Індикатор прогресу, що показує 4 кроки налаштування
- Кнопка "Далі" для продовження

### Крок 2: Налаштуйте свій розклад

На майстері показується екран **Налаштування розкладу**, де ви вирішуєте, як часто запускається автоматизація.

**Виберіть один із цих варіантів:**

**Попередні налаштування (рекомендується для новачків):**
- **Щодня о 9 ранку** - Найкраще для команд, які переглядають один раз на день під час ранкової нараду
- **Кожні 6 годин** - Хорошо для команд з безперервним потоком контенту
- **Щогодини** - Для команд з високим обсягом, що обробляють 50+ версій щодня

**Користувацький Cron (Продвинуто):**
Якщо у вас є специфічні потреби в синхронізації, введіть вираз cron (наприклад, `0 9 * * 1` для понеділків о 9 ранку).

**Що вибрати:** Почніть з "Щодня о 9 ранку", якщо ваша команда не працює за іншим розкладом.

### Крок 3: Встановіть правила авто-затвердження

На майстері відображається екран **Налаштування правил** з візуальними повзунками для встановлення порогів якості.

**З'являються три розділи:**

**Поріг впевненості (Лівий повзунок)**
- Діапазон: 0-100% (впевненість ШІ у своїх пропозиціях)
- Рекомендовано: Почніть з **80%**
- Що це означає: Автоматично затверджувати тільки якщо ШІ впевнений на 80%+

**Поріг схожості (Правий повзунок)**
- Діапазон: 0-100% (як схожа нова версія на поточний контент)
- Рекомендовано: Почніть з **70%**
- Що це означає: Автоматично затверджувати тільки якщо новий контент схожий на 70%+ до існуючого

**Селектор дії (Розкривне меню)**
- **Затвердити** - Автоматично застосувати зміни (рекомендовано)
- **Відхилити** - Автоматично відкинути низькоякісні пропозиції (використовуйте обережно)
- **Ручна перевірка** - Відправити все до черги ручної перевірки (не використовуйте для автоматизації)

**Найкраща практика:** Тримайте обидва повзунки між 70-85% спочатку. Ви завжди можете знизити їх пізніше, якщо ви не бачите достатньо автоматизації.

### Крок 4: Перевірка та активація

На майстері показується екран **Резюме**, що відображає:
- Розклад: "Щодня о 9 ранку"
- Поріг впевненості: "80%"
- Поріг схожості: "70%"
- Дія: "Затвердити"

Перевірте параметри (клацніть "Назад" для редагування, якщо потрібно), а потім клацніть **Активувати автоматизацію**.

Ви побачите повідомлення про успіх: "Автоматизація активована! Ваша перша система запланована на завтра о 9 ранку."

## Ваш перший запуск

### Де перевірити статус завдання

Після активації відвідайте **Панель приладів** → **Статистика автоматизації** для перегляду:

**Статистика в реальному часі:**
- Всього створено версій: 47
- Версій авто-затверджено: 34 (72%)
- Версій очікує на перевірку: 8
- Версій авто-відхилено: 5

**Наступний запланований запуск:**
Показує дату і час наступного циклу автоматизації (наприклад, "Завтра о 9:00")

### Як відстежувати затвердження

Перейдіть до **Панель приладів** → **Версії** (сторінка `/versions`) для керування версіями, що очікують затвердження.

**На цій сторінці показано:**
- Badge з кількістю версій, що очікують (наприклад, "8 очікують")
- Кнопки масових дій (Затвердити всі / Відхилити всі)
- Список окремих версій, що очікують перегляду
- Розділ "Про версіонування" з поясненням процесу затвердження

**Доступні дії:**
- Клацніть рядок версії, щоб побачити зміни (переглядач відмінностей)
- Виберіть кілька версій через checkboxes
- Використовуйте "Затвердити вибрані" або "Відхилити вибрані" для пакетних операцій
- Використовуйте "Затвердити всі" / "Відхилити всі" для швидких масових дій

**Очікується протягом першого тижня:**
- День 1: 10-20 незавершених версій (перегляньте їх, побачте, що затвердила автоматизація)
- День 2: 3-5 незавершених версій (менше = правила працюють добре)
- День 3+: 1-2 незавершені версії (стаціонарний стан)

Якщо кількість очікування продовжує зростати (20+ на день), ваші пороги надто суворі—знизьте їх у Параметрах.

### Що робити, якщо завдання не вдалося

**Симптом:** Розклад показує "Останній запуск не вдався" або "Немає запланованого завдання"

**Швидкі виправлення (по порядку):**

1. **Перевірте, чи автоматизація увімкнена**
   - Перейдіть до Параметри → Автоматизація
   - Переконайтеся, що перемикач показує "Увімкнено"

2. **Перевірте сервіс планувальника**
   - Відкрийте термінал/командний рядок
   - Виконайте: `docker ps | grep worker`
   - Повинен бути запущений "task-tracker-worker"
   - Якщо ні, попросіть адміністратора перезапустити сервіси

3. **Перевірте журнали на помилки**
   - Попросіть адміністратора перевірити: `docker logs task-tracker-worker`
   - Шукайте повідомлення про помилки, пов'язані з вашими правилами

4. **Протестуйте вручну**
   - Перейдіть до Параметри → Автоматизація
   - Клацніть кнопку "Запустити зараз"
   - Якщо це працює, розклад може бути неправильно налаштований

5. **Скиньте та повторіть спробу**
   - Перейдіть до Параметри → Автоматизація → Розширене
   - Клацніть "Скинути розклад"
   - Клацніть "Активувати" знову

**Все ще зламано?** Зв'яжіться з адміністратором зі знімком екрана повідомлення про помилку.

## Наступні кроки

### 1. Спостерігайте протягом одного тижня

Запустіть автоматизацію на параметрах за умовчанням (80% впевненості, 70% схожості) протягом 7 днів і зберіть дані:
- Скільки версій на день?
- Скільки авто-затверджено проти очікування?
- Якісь очевидні хибні позитиви (погані версії затверджені)?

### 2. Зрегулюйте правила

Після тижня при необхідності відрегулюйте:

**Якщо занадто консервативно** (очікування 15+/день):
- Знизьте поріг впевненості до 75%
- Знизьте поріг схожості до 60%

**Якщо занадто агресивно** (трапляються хибні затвердження):
- Підніміть поріг впевненості до 85%
- Підніміть поріг схожості до 75%

**Для регулювання:**
1. Перейдіть до Параметри → Автоматизація
2. Переміщайте повзунки на нові значення
3. Клацніть "Попередній перегляд" для перегляду впливу
4. Клацніть "Зберегти зміни"
5. Нові версії автоматично використовують оновлені правила

---

# Довідник конфігурації

## Налаштування розкладу

Розклад визначає, **коли** версії оцінюються та обробляються. Task Tracker підтримує як попередні налаштування, так і користувацькі cron вирази.

### Попередні налаштування

**Рекомендується для більшості користувачів.** Виберіть опцію, що відповідає робочому процесу вашої команди:

#### Щоденний розклад (9 ранку)

```
Час: Щодня о 9:00 ранку (часовий пояс сервера)
Cron: 0 9 * * *
Найкраще для: Команд з 1-2 сеансами перегляду на день
Обсяг: 10-50 версій на день
```

**Коли використовувати:**
- Ранкові наради команди, де ви переглядаєте версії разом
- Пакетна робота затвердження в один часовий блок
- Команди в одному часовому поясі

**Приклад:** Версія, створена о 8:45 ранку, чекає до 9:00 ранку для обробки.

#### Кожні 6 годин

```
Час: 12:00, 6:00, 12:00, 18:00
Cron: 0 */6 * * *
Найкраще для: Безперервної обробки протягом дня
Обсяг: 30-100 версій на день
```

**Коли використовувати:**
- Кілька команд у різних часових поясах
- Безперервне поглинання з Telegram
- Потрібні швидкі оновлення бази знань
- Важлива реакція в реальному часі

#### Щогодинний розклад

```
Час: Кожну годину о XX:00
Cron: 0 * * * *
Найкраще для: Високообсягових виробничих систем
Обсяг: 100+ версій на день
```

**Коли використовувати:**
- Великі команди, що обробляють тисячі повідомлень щодня
- Поглинання кожну хвилину з кількох каналів Telegram
- Потрібен час обороту менше години для затвердження
- Корпоративні розгортання

### Користувацькі Cron вирази

**Для досвідчених користувачів**, що потребують специфічного часу, не охопленого попередніми налаштуваннями.

#### Синтаксис Cron пояснено

```
┌─────────────── хвилина (0-59)
│ ┌───────────── година (0-23)
│ │ ┌─────────── день місяця (1-31)
│ │ │ ┌───────── місяць (1-12)
│ │ │ │ ┌─────── день тижня (0-7, де 0 і 7 = неділя)
│ │ │ │ │
│ │ │ │ │
* * * * *
```

#### Символи Cron

| Символ | Значення | Приклад |
|--------|----------|---------|
| `*` | Будь-яке значення | `*` = кожна хвилина |
| `,` | Список значень | `0,30` = в :00 і :30 |
| `-` | Діапазон значень | `9-17` = 9 ранку до 17:00 |
| `/` | Значення кроку | `*/6` = кожні 6 годин |

#### Популярні приклади Cron

**Тільки робочі години (понеділок-п'ятниця, 9 ранку-5 вечора)**

```cron
0 9,12,15 * * 1-5
```

**Щотижня в понеділок ранком**

```cron
0 9 * * 1
```

**Двічі на день у певний час**

```cron
0 9 * * *  # 9 ранку
0 17 * * * # 5 вечора
```

**Кожні 4 години**

```cron
0 */4 * * *
```

### Валідація Cron

**Дійсні приклади:**
```
0 9 * * *      # Щодня о 9 ранку
0 */6 * * *    # Кожні 6 годин
0 9 * * 1-5    # Будні дні о 9 ранку
```

**Неправильні приклади:**
```
60 * * * *     # Хвилина поза межами (макс 59)
* 25 * * *     # Година поза межами (макс 23)
0 9 32 * *     # День 32 не існує
```

## Правила авто-затвердження

Правила визначають **що** схвалюється та **як**. Правило - це набір умов, які запускають автоматичні дії.

### Структура правила

Кожне правило має три компоненти:

```
Умови (ЯКЩО)
   ↓
   Логіка оцінювання (І/АБО)
   ↓
   Дія (ТОДІ)
```

**Приклад правила:**
```
ЯКЩО впевненість >= 80 І схожість >= 70
ТОДІ затвердити
```

### Оцінювання версій

Коли створюється нова версія, Task Tracker витягує ці поля:

| Поле | Тип | Діапазон | Опис |
|------|-----|---------|------|
| `confidence` | Число | 0-100 | Впевненість ШІ у запропонованих змінах (%) |
| `similarity` | Число | 0-100 | Векторна схожість до існуючого контенту (%) |
| `topic_count` | Ціле число | 0-1000 | Визначених пов'язаних топіків у тексті |
| `topic.name` | Рядок | N/A | Назва топіка (для текстового збігу) |
| `source` | Рядок | N/A | Канал джерела (наприклад, "telegram") |
| `message_count` | Ціле число | 0-1000 | Повідомлень, що підтримують цю версію |

### Оператори умов

#### Для чисел (confidence, similarity, topic_count)

| Оператор | Символ | Значення | Приклад |
|----------|--------|----------|---------|
| Більше або дорівнює | `>=` | Щонайменше це значення | `confidence >= 80` |
| Менше або дорівнює | `<=` | Максимум це значення | `similarity <= 70` |
| Дорівнює | `==` | Точно це значення | `topic_count == 5` |
| Не дорівнює | `!=` | Будь-яке значення крім цього | `topic_count != 0` |

#### Для тексту (topic.name, source)

| Оператор | Символ | Значення | Приклад |
|----------|--------|----------|---------|
| Містить | `contains` | Текст з'являється де-небудь | `topic.name contains "urgent"` |
| Дорівнює | `equals` | Точне збігання | `source equals "telegram"` |
| Починається з | `starts_with` | Текст на початку | `topic.name starts_with "Bug"` |
| Не містить | `not_contains` | Текст не присутній | `topic.name not_contains "archived"` |

### Логічні оператори

#### Логіка І (Строгіша)

```
ЯКЩО впевненість >= 90 І схожість >= 80
ТОДІ затвердити
```

**Результат:** Обидві умови мають бути істинні. Версія потребує високої впевненості **та** високої схожості.

**Використовуйте коли:** Потрібні високоякісні затвердження, готові пропустити деякі хороші версії.

#### Логіка АБО (М'якша)

```
ЯКЩО впевненість >= 95 АБО схожість >= 90
ТОДІ затвердити
```

**Результат:** Одна з умов може бути істинною. Версія потребує дуже високої впевненості **або** дуже високої схожості.

**Використовуйте коли:** Хочете зловити більше версій, готові прийняти випадкові помилки.

### Дії

**Дія затвердження:**
- Зміни версії застосовані до головної сутності (Топік/Атом)
- Версія позначена як затверджена
- Запис додано до журналу аудиту
- WebSocket трансляція для оновлення кількості очікування

**Дія відхилення:**
- Версія позначена як переглянута, але не застосована
- Оригінальна сутність без змін
- Запис додано до журналу аудиту
- Корисно для фільтрації низькоякісних пропозицій

**Ручна дія:**
- Версія залишається очікуючою
- Користувач бачить значок сповіщення
- Потрібне рішення людини
- Версія залишається в базі даних для майбутнього перегляду

### Шаблони правил

#### Шаблон 1: Авто-затвердження високої впевненості

**Найкраще для:** Консервативних команд, зосереджених на якості

```json
{
  "name": "Авто-затвердження високої впевненості",
  "conditions": [
    {"field": "confidence", "operator": ">=", "value": 90},
    {"field": "similarity", "operator": ">=", "value": 85}
  ],
  "logic": "AND",
  "action": "approve",
  "enabled": true
}
```

**Метрики:**
- Рівень затвердження: ~60-70% версій
- Рівень помилок позитивних: <5% (дуже безпечно)
- Потрібна ручна перевірка: 30-40% версій

#### Шаблон 2: Збалансоване авто-затвердження

**Найкраще для:** Зростаючих команд, середнього обсягу

```json
{
  "name": "Збалансоване авто-затвердження",
  "conditions": [
    {"field": "confidence", "operator": ">=", "value": 80},
    {"field": "similarity", "operator": ">=", "value": 70}
  ],
  "logic": "AND",
  "action": "approve",
  "enabled": true
}
```

**Метрики:**
- Рівень затвердження: ~75-85% версій
- Рівень помилок позитивних: 5-10% (прийнятно)
- Потрібна ручна перевірка: 15-25% версій

#### Шаблон 3: Авто-відхилення низької якості

**Найкраще для:** Фільтрації очевидних поганих версій

```json
{
  "name": "Авто-відхилення низької якості",
  "conditions": [
    {"field": "confidence", "operator": "<", "value": 50}
  ],
  "logic": "OR",
  "action": "reject",
  "enabled": true
}
```

**Ефект:** Версії з <50% впевненості автоматично відкинені

**Метрики:**
- Рівень відхилення: ~15-20% версій
- Запобігає низькоякісним версіям від очікування
- Зменшує навантаження ручної перевірки

---

# Усунення неполадок

## Поширені проблеми та рішення

### Проблема 1: Завдання не запускається

**Симптоми:**
- Час наступного запуску минає без виконання
- Панель приладів показує "Останній запуск: Ніколи"
- Статус залишається "Бездіяльний"
- Жодні нові версії не авто-затверджуються

**Коренні причини:**
1. Завдання вимкнено
2. Сервіс планувальника офлайн
3. Неправильний вираз cron
4. Помилка підключення до бази даних
5. Черга worker не обробляє

#### Покрокове рішення

**Крок 1: Перевірте, чи автоматизація увімкнена**

1. Перейдіть до **Параметри → Автоматизація**
2. Шукайте перемикач з міткою "Увімкнути автоматизацію" або "Статус автоматизації"
3. Якщо перемикач ВИМК, клацніть, щоб увімкнути
4. Перевірте, що поле "Наступний запуск" оновлюється, щоб показати наступний запланований час

**Крок 2: Переконайтеся, що сервіс планувальника працює**

Відкрийте термінал/командний рядок і перевірте:

```bash
docker ps | grep worker
```

**Очікуваний вивід:**
```
abc1234def56 task-tracker-worker ... Up 2 days
```

**Якщо не працює:**
- Попросіть адміністратора перезапустити: `docker compose restart worker`
- Перевірте журнали: `docker logs task-tracker-worker`

**Крок 3: Валідуйте вираз Cron**

Якщо використовуєте користувацький cron, перевірте синтаксис:

1. Перейдіть до **Параметри → Автоматизація**
2. Скопіюйте вираз cron (наприклад, `0 9 * * *`)
3. Використовуйте онлайн валідатор: https://crontab.guru
4. Повинен показувати людино-читабельний опис
5. Якщо з'являється помилка, виправте синтаксис

**Крок 4: Протестуйте ручний тригер**

1. Перейдіть до **Параметри → Автоматизація**
2. Шукайте кнопку "Запустити зараз" (або подібну)
3. Клацніть на неї
4. Перевірте повідомлення про успіх або помилку

**Якщо це працює:**
- Розклад може бути неправильним (перевірте вираз cron)
- Система потребує повного перезапуску

**Якщо не вдається:**
- Зверніть увагу на повідомлення про помилку
- Перевірте журнали (див. нижче)

#### Як перевірити журнали

**Журнали backend:**
```bash
docker logs task-tracker-worker | tail -50
```

**Шукайте:**
- Повідомлення `ERROR` або `Exception`
- Деталі обробки завдань
- Повідомлення про помилки підключення

---

### Проблема 2: Авто-затвердження не працює

**Симптоми:**
- Версії створені, але не авто-затверджені
- Кількість усіх очікувань зростає, жодні не затверджені
- Потрібна ручна перевірка для всіх версій
- Правило здається увімкненим, але не спрацьовує

**Коренні причини:**
1. Умови правила занадто суворі
2. Правило вимкнено або неактивне
3. Дані версії не мають оцінок впевненості/схожості
4. База даних не зберігає конфігурацію правила

#### Покрокове рішення

**Крок 1: Перевірте, що правило активне**

1. Перейдіть до **Параметри → Автоматизація → Правила**
2. Знайдіть ваше правило (наприклад, "Авто-затвердження високої впевненості")
3. Перевірте, що перемикач показує "Увімкнено" або подібне
4. Якщо вимкнено, клацніть, щоб увімкнути

**Крок 2: Перегляньте умови правила**

1. Клацніть назву правила для редагування
2. Перевірте поточні пороги
3. Порівняйте з версіями, що очікують:
   - Перейдіть до **Панель приладів → Версії, що очікують**
   - Клацніть версію, щоб побачити її оцінки впевненості/схожості
   - Чи відповідає вона умовам правила?

**Приклад:**
- Правило вимагає: впевненість >= 90 І схожість >= 85
- Версія, що очікує, показує: впевненість 75, схожість 80
- **Результат:** Версія не відповідає умовам → залишається очікуючою (правильна поведінка)

**Крок 3: Використовуйте функцію попереднього перегляду**

1. Перейдіть до **Параметри → Автоматизація → Правила**
2. Клацніть кнопку "Попередній перегляд" (якщо доступна)
3. Показує: "Це правило вплине на X версій"
4. Якщо попередній перегляд показує 0, умови занадто суворі

**Дія:** Знизьте пороги та повторіть попередній перегляд
- З 90/85 → спробуйте 85/80 або 80/70

---

### Проблема 3: Високий рівень помилок позитивних

**Симптоми:**
- Багато авто-затверджених версій неправильні
- Неправильні імена, описи або зміни метаданих
- Ручна перевірка виявляє 20%+ поганих
- Якість погіршується з часом

**Коренні причини:**
1. Пороги занадто низькі
2. Правила занадто широкі або відсутні умови
3. Неправильна оцінка впевненості/схожості
4. Неправильна логіка правила (АБО замість І)

#### Покрокове рішення

**Крок 1: Виміряйте рівень помилок позитивних**

1. Перейдіть до **Панель приладів → Статистика автоматизації**
2. Зверніть увагу на кількість "Авто-затверджених" за сьогодні (наприклад, 34)
3. Перейдіть до **Версії → Історія** або **Журнал аудиту**
4. Вручну перевірте 20-30 затверджених версій
5. Порахуйте, скільки насправді неправильні
6. Розрахуйте: (кількість неправильних / загальна перевірена) × 100

**Приклад:**
- Перевірено 30 версій
- Знайдено 5 неправильних
- Рівень помилок позитивних = 5/30 = 17%

**Прийнятно:** <10% рівень помилок позитивних

**Крок 2: Змініть пороги**

1. Перейдіть до **Параметри → Автоматизація → Правила**
2. Клацніть ваше правило для редагування
3. Збільшіть як впевненість, так і схожість на 5-10%
4. Клацніть "Попередній перегляд", щоб побачити вплив
5. Якщо попередній перегляд показує менше затверджених версій, збережіть

**Приклад переходу:**
```
Поточний: впевненість 75, схожість 60 → 8 помилок позитивних
Збільшити до: впевненість 85, схожість 75 → 2 помилки позитивних
Збільшити до: впевненість 90, схожість 85 → 0 помилок позитивних
```

---

### Проблема 4: Кількість очікування застряла або не оновлюється

**Симптоми:**
- Значок показує 23 очікувань, ніколи не змінюється
- Ручне затвердження зменшує його, потім воно повертається
- WebSocket не оновлює кількість
- Оновити сторінку, кількість інша

**Коренні причини:**
1. З'єднання WebSocket втрачено
2. Кеш значка не інвалідується
3. Умова гонки в базі даних
4. Застарілі дані в браузері

#### Покрокове рішення

**Крок 1: Оновіть сторінку**

Іноді кеш браузера застарілий:

1. Натисніть **F5** або **Cmd+R** для оновлення
2. Зачекайте 5 секунд для повного завантаження сторінки
3. Перевірте, чи оновлюється кількість

**Крок 2: Жорстке оновлення (Очистити кеш)**

Застарілий JavaScript/CSS може спричинити застарілі кількості. Примусово перезавантажте:

1. **Chrome/Firefox/Edge:**
   - Утримуйте **Ctrl + Shift + R** (Windows/Linux)
   - Утримуйте **Cmd + Shift + R** (Mac)

2. **Або використовуйте DevTools:**
   - Відкрийте DevTools (F12)
   - Клацніть правою кнопкою миші кнопку оновлення
   - Виберіть "Очистити кеш і жорстко перезавантажити"

**Очікується:** Кількість відповідає останньому стану бази даних після жорсткого оновлення.

---

### Проблема 5: 404 помилки або відповіді "Не знайдено"

**Симптоми:**
- Запити API не виконуються зі статусом 404
- Консоль браузера показує "GET /api/v1/... 404"
- Функції не завантажуються або показують помилки
- Після недавнього розгортання або оновлення

**Коренні причини:**
1. Шлях маршруту API змінився
2. Застарілий JavaScript кешований у браузері
3. Невідповідність версій frontend/backend
4. Маршрутизація Nginx неправильно налаштована

#### Покрокове рішення

**Крок 1: Жорстке оновлення браузера**

Більшість 404 після оновлень спричинені кешованим JavaScript, що викликає старі кінцеві точки:

1. **Жорстке оновлення:**
   - **Ctrl + Shift + R** (Windows/Linux)
   - **Cmd + Shift + R** (Mac)

2. **Або очистіть кеш вручну:**
   - F12 → вкладка Application → Clear storage → Clear site data
   - Закрийте та знову відкрийте браузер

**Очікується:** Після жорсткого оновлення всі виклики API повинні повертати 200 або відповідний статус.

---

## Довідник повідомлень про помилки

| Помилка | Причина | Виправлення |
|---------|---------|-------------|
| "Invalid cron expression" | Синтаксична помилка в cron | Використовуйте https://crontab.guru для валідації |
| "Job not found" | Планувальник не має запису завдання | Перезапустіть сервіс worker |
| "Rule evaluation failed" | Помилка в умовах правила | Перевірте синтаксис правила, видаліть проблемні умови |
| "Database connection refused" | PostgreSQL офлайн | Попросіть адміністратора перезапустити postgres |
| "WebSocket disconnected" | Проблема мережі або сервер вимкнений | Оновіть сторінку, перевірте з'єднання з інтернетом |
| "Version not found" | Версія видалена після створення | Може бути умова гонки, спробуйте знову |
| "404 Not Found" | Застарілий кеш або змінені маршрути API | Жорстке оновлення браузера (Ctrl+Shift+R) |

---

# Найкращі практики

## Шаблони проектування правил

### Шаблон 1: Консервативна стратегія старту

**Найкраще для:** Нових впровадження, високих вимог якості

**Підхід:**
Почніть з високих порогів, поступово знижуйте на основі реальних даних.

**Первинна конфігурація:**
```json
{
  "confidence_threshold": 90,
  "similarity_threshold": 85,
  "auto_action": "approve"
}
```

**Чому консервативна?**
- <5% рівень помилок позитивних (дуже безпечно)
- Дає рецензентам оцінити якість даних
- Зменшує ризик масового затвердження поганих версій
- Будує довіру команди до автоматизації

**Процес щотижневого огляду:**
```
Тиждень 1: Контроль з 90/85
├─ Відстеження рівня помилок позитивних
├─ Визначення версій, які мали бути авто-затверджені
└─ Збір 7 днів даних

Тиждень 2: Коригування, якщо потрібно
├─ Якщо 30%+ очікування: знизьте до 85/80
├─ Якщо 2%+ помилок: залиште на 90/85
└─ Запустіть ще один тиждень при нових параметрах

Тиждень 3: Друге коригування
├─ Якщо все ще 20%+ очікування: знизьте до 80/70
├─ Інакше: підтримувати поточні пороги
└─ Контроль для ще 2 тижнів

Тиждень 4+: Стаціонарний стан
├─ Пороги стабільні (авто-затвердження 70-80%)
├─ Рівень помилок прийнятний (<10%)
└─ Команда впевнена в автоматизації
```

### Шаблон 2: Багаторівнева архітектура правил

**Найкраще для:** Складного контролю якості, великих команд

**Рівень 1: Авто-затвердження високої якості**
```json
{
  "priority": 1,
  "name": "Premium Auto-Approve",
  "conditions": {
    "confidence": { "operator": ">=", "value": 95 },
    "similarity": { "operator": ">=", "value": 90 }
  },
  "logic": "AND",
  "action": "approve"
}
```

**Результат:** ~40-50% версій авто-затверджено
**Якість:** 98%+ точність (найбезпечніший рівень)

**Рівень 2: Авто-відхилення очевидного сміття**
```json
{
  "priority": 2,
  "name": "Auto-Reject Low Quality",
  "conditions": {
    "confidence": { "operator": "<", "value": 50 }
  },
  "logic": "OR",
  "action": "reject"
}
```

**Результат:** ~15-20% версій авто-відхилено

**Загальний ефект:**
- 65-85% авто-обробка (затвердження + відхилення)
- 15-35% ретельна ручна перевірка
- <10% рівень помилок позитивних

### Шаблон 3: Правила для конкретних топіків

**Найкраще для:** Неоднорідної якості даних за топіком

**Налаштування:**
Різні канали Telegram мають різні рівні якості. Створіть правила, що відображають реальність.

**Правило 1: Перевірені канали (висока якість)**
```json
{
  "priority": 1,
  "conditions": {
    "source": { "operator": "equals", "value": "telegram_official" },
    "confidence": { "operator": ">=", "value": 75 }
  },
  "logic": "AND",
  "action": "approve"
}
```

**Примітка:** Нижчий поріг (75 проти 80), оскільки джерело надійне

**Правило 2: Загальні канали (стандартна якість)**
```json
{
  "priority": 2,
  "conditions": {
    "source": { "operator": "equals", "value": "telegram_general" },
    "confidence": { "operator": ">=", "value": 85 },
    "similarity": { "operator": ">=", "value": 80 }
  },
  "logic": "AND",
  "action": "approve"
}
```

## Оптимізація розкладу

### Рекомендовані розклади за обсягом

#### Малі команди (10-50 версій/день)

```
Розклад: Щодня о 9 ранку
Cron: 0 9 * * *

Чому: Єдиний сеанс перевірки узгоджується з нарадою
Час виконання: <30 секунд
Ручна перевірка: 5-15 версій
```

**Робочий процес:**
1. 9 ранку: Автоматизація запускається
2. 9:05 ранку: Команда переглядає версії, що очікують (8 очікують)
3. 9:15 ранку: Команда масово затверджує/переглядає разом

#### Середні команди (50-200 версій/день)

```
Розклад: Кожні 6 годин (4 рази/день)
Cron: 0 */6 * * *

Чому: Безперервна обробка, розумний час виконання
Час виконання: 2-5 секунд за запуск
Ручна перевірка: 10-50 версій перед наступним запуском
```

**Робочий процес:**
```
6 ранку: Перший запуск (накопичення ночі)
12 дня: Другий запуск (версії ранку)
6 вечора: Третій запуск (версії після обіду)
12 ночі: Четвертий запуск (версії вечора)
```

Команда переглядає версії, що очікують, двічі на день (9 ранку + 5 вечора).

#### Великі команди (200+ версій/день)

```
Розклад: Щогодини
Cron: 0 * * * *

Чому: Відповідь менше години, обробляє великий обсяг
Час виконання: 1-2 секунди за запуск
Ручна перевірка: 10-20 на годину (перегляд на ходу)
```

**Робочий процес:**
```
Кожну годину: Автоматизація запускається (початок години)
За потребою: Команда переглядає значок очікування
Реальний час: Немає накопичення пакетів
```

### Вплив частоти на ручне навантаження

| Розклад | Версій за запуск | Очікування між запусками | Частота ручного огляду |
|---------|-----------------|--------------------------|------------------------|
| Щодня | 30-100 | 30-100 | Раз на день |
| 6-годинно | 10-50 | 10-50 | Двічі на день |
| Щогодинно | 5-15 | 5-15 | Протягом дня |

**Правило:** Більш часта автоматизація = менші розміри пакетів = більш реактивна, менш перевантажлива

## Спостереження та обслуговування

### Щотижневий процес огляду

**Кожен понеділок ранком (30 хвилин):**

**1. Перевірте статистику автоматизації (5 хвилин)**
- Перейдіть до **Панель приладів → Статистика автоматизації**
- Зверніть увагу: рівень затвердження, рівень відхилення, очікування
- Порівняйте з попереднім тижнем

**Очікувані метрики:**
```
Цільовий рівень затвердження: 70-85%
Цільовий рівень відхилення: 10-20%
Цільове очікування: <20 версій
Цільовий рівень помилок позитивних: <10%
```

**2. Перегляньте журнали аудиту (10 хвилин)**
- Перейдіть до **Параметри → Автоматизація → Журнали аудиту**
- Фільтрація за останні 7 днів
- Перевірте, які правила спрацьовували найбільше
- Шукайте закономірності збоїв

**3. Приклад ручного огляду (10 хвилин)**
- Перейдіть до **Версії → Історія**
- Випадково перевірте 10 авто-затверджених версій
- Перевірте 5 відхилених версій
- Оцініть: правильні рішення?

**Дія при виявленні проблем:**
- 1-2 поганих затвердження → коригуйте пороги (підніміть на 5%)
- 3-4 поганих затвердження → перевірте умови правила
- 5+ поганих затвердження → вимкніть правило, дослідіть

**4. Перевірте очікування (5 хвилин)**
- Перейдіть до **Панель приладів → Значок очікування**
- Зверніть увагу на поточну кількість очікування
- Якщо >20: розглянути зниження порогів
- Якщо тренд зростає: можливо, потрібні додаткові правила

### Щомісячне глибоке занурення

**Щомісячний огляд (1 година):**

**1. Повна місячна аналітика**
- Всього обробленних версій: _
- Рівень авто-затвердження: _%
- Рівень авто-відхилення: _%
- Рівень помилок позитивних: _%
- Потребує ручної перевірки: _%

**2. Розрахунок вартості (ROI)**
```
Версій авто-оброблено: 1200
Час ручної перевірки збережено: 30 хв./версія × 1200 = 600 годин
Звільнена ємність команди: 600 годин × $50/год = $30,000 вартість
```

**3. Метрики якості**
- Аудит всіх помилок позитивних (поганих затверджень)
- Оцініть їх: критичні, значні, незначні
- Плануйте виправлення на наступний місяць

## Приклади робочих процесів

### Робочий процес A: Стартап (низький обсяг, висока якість)

**Команда:** 2-3 людини
**Обсяг:** 20-50 версій/день
**Мета:** Немає проблем якості, мінімальні накладні витрати

**Конфігурація:**
```
Розклад: Щодня о 9 ранку
Поріг впевненості: 90%
Поріг схожості: 85%
Дія: Затвердити
Правила: 1 (консервативна)
```

**Робочий процес:**
1. 9 ранку: Автоматизація запускається (авто-затверджує ~80%, ~8 очікують)
2. 9:15 ранку: Команда переглядає версії, що очікують (займає 10 хв)
3. 9:30 ранку: Готово, команда продовжує розробку
4. Наступний день: Повторити

**Метрики:**
- Рівень помилок позитивних: <5%
- Ручна перевірка: 8 версій/день (20 хвилин всього)
- Точність: 100% (команда все перевіряє)

### Робочий процес B: Зростаюча команда (середній обсяг, збалансована)

**Команда:** 5-10 людей
**Обсяг:** 100-200 версій/день
**Мета:** 70-80% автоматизація, прийнятна 10% помилка

**Конфігурація:**
```
Розклад: Кожні 6 годин
Правила: 3 (premium, standard, garbage)
├─ Premium (90/85): авто-затвердження ~35%
├─ Garbage (<50): авто-відхилення ~15%
└─ Standard (80/70): авто-затвердження ~35%
```

**Робочий процес:**
1. 6 ранку, 12 дня, 6 вечора, 12 ночі: Автоматизація запускається (кожні 6 годин)
2. 9 ранку & 5 вечора: Команда переглядає пакет, що очікує (30 хв кожен)
3. Щотижневий огляд: коригуйте правила за потребою

**Метрики:**
- Рівень помилок позитивних: 8-12%
- Ручна перевірка: 30-50 версій/день (всього 1 година)
- Автоматизація обробляє: 70% рішень

### Робочий процес C: Корпоративний (високий обсяг, складний)

**Команда:** 20+ людей
**Обсяг:** 1000+ версій/день
**Мета:** 80%+ автоматизація, <5% помилка, обробка в реальному часі

**Конфігурація:**
```
Розклад: Щогодини
Правила: 5+ (багаторівневі, для конкретних джерел, для конкретних топіків)
├─ Premium джерела (75% поріг): авто-затвердження
├─ Перевірені канали (80/70): авто-затвердження
├─ Низька впевненість (<40): авто-відхилення
├─ Термінові топіки: ескалація до ручної
└─ За умовчанням: розподіл до черги перевірки
```

**Робочий процес:**
1. Кожну годину: Автоматизація запускається (обробляє 85% версій)
2. Реальний час: Команда переглядає очікування по мірі надходження
3. Щодня: Переглядайте метрики автоматизації
4. Щотижня: Коригуйте правила на основі продуктивності

**Метрики:**
- Рівень помилок позитивних: <5%
- Ручна перевірка: 5-10 на годину (на ходу)
- Автоматизація обробляє: 85% рішень
- Затвердження в реальному часі: <5 хвилин від створення

## Поширені помилки, яких слід уникати

### Помилка 1: Починайте занадто агресивно

**Що трапляється:**
- Встановіть пороги занадто низькі (70/60)
- Рівень помилок позитивних 20%+
- Команда втрачає довіру
- Врешті-решт вимкніть автоматизацію

**Виправлення:**
- Почніть консервативно (90/85)
- Поступово знижуйте, як дані показують безпеку
- Щотижня контролюйте рівень помилок позитивних

### Помилка 2: Ігнорування помилок позитивних

**Що трапляється:**
- Автоматизація працює добре на статистиці
- Користувачі тихо помічають поганих затвердження
- Довіра згасає, люди все рівно вручну переглядають
- Автоматизація стає марною

**Виправлення:**
- Щотижня вибірково перевіряйте 10 затверджених версій
- Явно отримуйте рівень помилок позитивних
- Підніміть пороги, якщо коефіцієнт >10%

### Помилка 3: Ніколи не коригуйте правила

**Що трапляється:**
- Первинні правила не відображають реальні дані
- Очікування постійно зростає
- Автоматизація ігнорує очевидні закономірності
- Правила стають застарілими

**Виправлення:**
- Щомісяця переглядайте журнали аудиту
- Коригуйте пороги щоквартально
- Додавайте нові правила, коли з'являються закономірності даних

### Помилка 4: Надмірне ускладнення правил

**Що трапляється:**
- 10+ правил з перехресними умовами
- Ніхто не розуміє, коли спрацює кожне
- Неможливо налагодити
- Наступна людина, яка намагається змінити, здається

**Виправлення:**
- Тримайте максимум 3-5 правил
- Чітке найменування (що робить це правило?)
- Документуйте логіку рішення

## Контрольний список успіху

**Перед розгортанням у виробництво:**

- [ ] Почав з консервативних порогів (90/85)
- [ ] Запустив тиждень з порогами, контролював рівень помилок позитивних
- [ ] Рівень помилок позитивних <10%
- [ ] Команда навчена функціям автоматизації
- [ ] Запланував щотижневий процес огляду
- [ ] План відкату, якщо виникають проблеми (вимкніть автоматизацію)
- [ ] Адміністратор знає, як перевірити журнали/перезапустити сервіси

**Після 1 місяця:**

- [ ] Задокументував поточні пороги та причини
- [ ] Розраховував ROI (час збережено)
- [ ] Виявлені закономірності в очікуванні версій
- [ ] Плановані поліпшення Q1
- [ ] Команда впевнена в автоматизації
