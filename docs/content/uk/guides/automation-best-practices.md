# Посібник найкращих практик

**Останнє оновлення:** 26 жовтня 2025
**Статус:** Готові до виробництва
**Аудиторія:** Команди, що оптимізують робочі процеси автоматизації

## Шаблони проектування правил

### Шаблон 1: Консервативна стратегія старту

**Найкраще для:** Нових впровадження, високих вимог якості

**Підхід:** Почніть з високих порогів, поступово знижуйте на основі реальних даних.

**Первинна конфігурація:**
```json
{
  "confidence_threshold": 90,
  "similarity_threshold": 85,
  "auto_action": "approve"
}
```

**Чому консервативна?**
- <5% рівень помилок позитивних (дуже безпечно)
- Дає рецензентам оцінити якість даних
- Зменшує ризик масового затвердження поганих версій
- Будує довіру команди до автоматизації

**Процес щотижневого огляду:**
```
Тиждень 1: Контроль з 90/85
├─ Отримання рівня помилок позитивних
├─ Визначення версій, які мали бути авто-затверджені
└─ Збір 7 днів даних

Тиждень 2: Коригування, якщо потрібно
├─ Якщо 30%+ очікування: знизьте до 85/80
├─ Якщо 2%+ помилок: залиште на 90/85
└─ Запустіть ще один тиждень при нових параметрах

Тиждень 3: Друге коригування
├─ Якщо все ще 20%+ очікування: знизьте до 80/70
├─ Інакше: підтримувати поточні пороги
└─ Контроль для ще 2 тижнів

Тиждень 4+: Стаціонарний стан
├─ Пороги стабільні (авто-затвердження 70-80%)
├─ Рівень помилок прийнятний (<10%)
└─ Команда впевнена в автоматизації
```

### Шаблон 2: Багаторівнева архітектура правил

**Найкраще для:** Складного контролю якості, великих команд

**Рівень 1: Авто-затвердження високої якості**
```json
{
  "priority": 1,
  "name": "Premium Auto-Approve",
  "conditions": {
    "confidence": { "operator": ">=", "value": 95 },
    "similarity": { "operator": ">=", "value": 90 }
  },
  "logic": "AND",
  "action": "approve"
}
```

**Результат:** ~40-50% версій авто-затверджено
**Якість:** 98%+ точність (найбезпечніший рівень)

**Рівень 2: Авто-відхилення очевидного сміття**
```json
{
  "priority": 2,
  "name": "Auto-Reject Low Quality",
  "conditions": {
    "confidence": { "operator": "<", "value": 50 }
  },
  "logic": "OR",
  "action": "reject"
}
```

**Результат:** ~15-20% версій авто-відхилено

**Рівень 3: Авто-затвердження середньої якості**
```json
{
  "priority": 3,
  "name": "Standard Auto-Approve",
  "conditions": {
    "confidence": { "operator": ">=", "value": 80 },
    "similarity": { "operator": ">=", "value": 70 }
  },
  "logic": "AND",
  "action": "approve"
}
```

**Результат:** ~25-35% версій авто-затверджено
**Якість:** 90-95% точність

**Загальний ефект:**
- 65-85% авто-обробка (затвердження + відхилення)
- 15-35% ретельна ручна перевірка
- <10% рівень помилок позитивних

### Шаблон 3: Правила для конкретних топіків

**Найкраще для:** Неоднорідної якості даних за топіком

**Налаштування:**
Різні канали Telegram мають різні рівні якості. Створіть правила, що відображають реальність.

**Правило 1: Перевірені канали (висока якість)**
```json
{
  "priority": 1,
  "conditions": {
    "source": { "operator": "equals", "value": "telegram_official" },
    "confidence": { "operator": ">=", "value": 75 }
  },
  "logic": "AND",
  "action": "approve"
}
```

**Примітка:** Нижчий поріг (75 проти 80), оскільки джерело надійне

**Правило 2: Загальні канали (стандартна якість)**
```json
{
  "priority": 2,
  "conditions": {
    "source": { "operator": "equals", "value": "telegram_general" },
    "confidence": { "operator": ">=", "value": 85 },
    "similarity": { "operator": ">=", "value": 80 }
  },
  "logic": "AND",
  "action": "approve"
}
```

## Оптимізація розкладу

### Рекомендовані розклади за обсягом

#### Малі команди (10-50 версій/день)

```
Розклад: Щодня о 9 ранку
Cron: 0 9 * * *

Чому: Єдиний сеанс перевірки узгоджується з нарадою
Час виконання: <30 секунд
Ручна перевірка: 5-15 версій
```

#### Середні команди (50-200 версій/день)

```
Розклад: Кожні 6 годин (4 рази/день)
Cron: 0 */6 * * *

Чому: Безперервна обробка, розумний час виконання
Час виконання: 2-5 секунд за запуск
Ручна перевірка: 10-50 версій перед наступним запуском
```

#### Великі команди (200+ версій/день)

```
Розклад: Щогодини
Cron: 0 * * * *

Чому: Відповідь менше години, обробляє великий обсяг
Час виконання: 1-2 секунди за запуск
Ручна перевірка: 10-20 на годину (перегляд на ходу)
```

### Вплив частоти на ручне навантаження

| Розклад | Версій за запуск | Очікування між запусками | Частота ручного огляду |
|---------|-----------------|--------------------------|----------------------|
| Щодня | 30-100 | 30-100 | Раз на день |
| 6-річно | 10-50 | 10-50 | Двічі на день |
| Щогодинно | 5-15 | 5-15 | Протягом дня |

## Стратегія сповіщень

### Шаблон 1: Дайджест замість окремих оповіщень

**Рекомендується:** Використовуйте щоденний дайджест замість сповіщень для кожної версії

**Конфігурація:**
```yaml
email:
  frequency: "daily"       # Щоденний дайджест о 9 ранку
  threshold: "pending > 0" # Якщо є який-небудь очікування

telegram:
  enabled: false           # Пропустіть окремі сповіщення
```

**Чому?**
- Зменшує втому від сповіщень (1 лист проти 50 листів)
- Дає людям можливість групувати перевірку
- Легше сконцентруватися на цінних версіях

### Шаблон 2: Сповіщення про поріг + щотижневий дайджест

**Конфігурація:**
```yaml
telegram:
  enabled: true
  alert_when: "pending >= 25"    # Попередження, якщо 25+ очікування
  alert_frequency: "once_per_day"

email:
  frequency: "weekly"            # Щотижневе резюме
  day: "monday"
  time: "9:00 AM"
```

**Ефект:**
- Щоденний Telegram сповіст, якщо відставання зростає
- Щотижневий лист електронної пошти кожного понеділка
- Рівновага між реакцією та тихою роботою

## Спостереження та обслуговування

### Щотижневий процес огляду

**Кожен понеділок ранком (30 хвилин):**

**1. Перевірте статистику автоматизації (5 хвилин)**
- Перейдіть до **Панель приладів → Статистика автоматизації**
- Зверніть увагу: рівень затвердження, відхилення, очікування

**Очікувані метрики:**
```
Цільовий рівень затвердження: 70-85%
Цільовий рівень відхилення: 10-20%
Цільове очікування: <20 версій
Цільовий рівень помилок: <10%
```

**2. Перегляньте журнали аудиту (10 хвилин)**
- Перейдіть до **Параметри → Автоматизація → Журнали аудиту**
- Фільтрація за останні 7 днів
- Перевірте, які правила спрацьовували найбільше
- Шукайте закономірності збоїв

**3. Приклад ручного огляду (10 хвилин)**
- Перейдіть до **Версії → Історія**
- Випадково перевірте 10 авто-затверджених версій
- Перевірте 5 відхилених версій
- Оцінювати: правильні рішення?

**Дія при виявленні проблем:**
- 1-2 поганих затвердження → коригуйте пороги
- 3-4 поганих затвердження → перевірте умови правила
- 5+ поганих затвердження → вимкніть правило

**4. Перевірте очікування (5 хвилин)**
- Перейдіть до **Панель приладів → Значок очікування**
- Зверніть увагу на поточну кількість очікування
- Якщо >20: розглянути зниження порогів

### Щомісячне глибоке занурення

**Щомісячний огляд (1 година):**

**1. Повна місячна аналітика**
- Всього обробленних версій: _
- Рівень авто-затвердження: _%
- Рівень авто-відхилення: _%
- Рівень помилок позитивних: _%
- Потребує ручної перевірки: _%

**2. Розрахунок вартості (ROI)**
```
Версій авто-оброблено: 1200
Час ручної перевірки збережено: 30 хв./версія × 1200 = 600 годин
Звільнена ємність команди: 600 годин × $50/год = $30,000 вартість
```

## Приклади робочих процесів

### Робочий процес A: Стартап (низький обсяг, висока якість)

**Команда:** 2-3 людини
**Обсяг:** 20-50 версій/день
**Мета:** Немає проблем якості, мінімальні накладні витрати

**Конфігурація:**
```
Розклад: Щодня о 9 ранку
Поріг впевненості: 90%
Поріг схожості: 85%
Дія: Затвердити
Правила: 1 (консервативна)
Сповіщення: Тільки дайджест електронної пошти
```

**Метрики:**
- Рівень помилок позитивних: <5%
- Ручна перевірка: 8 версій/день (20 хвилин всього)
- Точність: 100% (команда все перевіряє)

### Робочий процес B: Вирощування команди (середній обсяг, збалансована)

**Команда:** 5-10 людей
**Обсяг:** 100-200 версій/день
**Мета:** 70-80% автоматизація, прийнятна 10% помилка

**Конфігурація:**
```
Розклад: Кожні 6 годин
Правила: 3 (premium, standard, garbage)
├─ Premium (90/85): авто-затвердження ~35%
├─ Garbage (<50): авто-відхилення ~15%
└─ Standard (80/70): авто-затвердження ~35%
Сповіщення: Telegram alert + email digest
```

**Метрики:**
- Рівень помилок позитивних: 8-12%
- Ручна перевірка: 30-50 версій/день (всього 1 година)
- Автоматизація обробляє: 70% рішень

## Поширені помилки, яких слід уникати

### Помилка 1: Починайте занадто агресивно

**Що трапляється:**
- Встановіть пороги занадто низькі (70/60)
- Рівень помилок 20%+
- Команда втрачає довіру
- Врешті-решт вимкніть автоматизацію

**Виправлення:**
- Почніть консервативно (90/85)
- Поступово знижуйте, як дані показують безпеку
- Щотижня контролюйте рівень помилок позитивних

### Помилка 2: Ігнорування помилок позитивних

**Що трапляється:**
- Автоматизація працює добре на статистиці
- Користувачі тихо помічають поганих затвердження
- Довіра згасає, люди все рівно вручну переглядають
- Автоматизація стає марною

**Виправлення:**
- Щотижня вибірково перевіряйте 10 затверджених версій
- Явно отримувати рівень помилок позитивних
- Підніміть пороги, якщо коефіцієнт >10%

### Помилка 3: Ніколи не коригуйте правила

**Що трапляється:**
- Первинні правила не відображають реальні дані
- Очікування постійно зростає
- Автоматизація ігнорує очевидні закономірності
- Правила стають застарілими

**Виправлення:**
- Щомісяця переглядайте журнали аудиту
- Коригуйте пороги щоквартально
- Додавайте нові правила, коли з'являються закономірності

### Помилка 4: Над-ускладнення правил

**Що трапляється:**
- 10+ правил з перехресними умовами
- Ніхто не розуміє, коли спрацює кожне
- Неможливо налагодити
- Наступна людина здається, що здається

**Виправлення:**
- Тримайте максимум 3-5 правил
- Чітке найменування (що робить це правило?)
- Документуйте логіку рішення

## Контрольний список успіху

**Перед розгортанням у виробництво:**

- [ ] Почав з консервативних порогів (90/85)
- [ ] Запустив тиждень з порогами, контролював рівень помилок позитивних
- [ ] Рівень помилок позитивних <10%
- [ ] Команда навчена функціям автоматизації
- [ ] Запланував щотижневий процес огляду
- [ ] Сповіщення налаштовані та протестовані

**Після 1 місяця:**

- [ ] Задокументував поточні пороги та причини
- [ ] Розраховував ROI (час збережено)
- [ ] Виявлені закономірності в очікуванні версій
- [ ] Планова поліпшення Q1
- [ ] Команда впевнена в автоматизації

---

**Далі:** Див. [Довідник конфігурації](automation-configuration.md) для детального налаштування порогу, або [Найкращі практики](automation-best-practices.md) для виробничих шаблонів.
