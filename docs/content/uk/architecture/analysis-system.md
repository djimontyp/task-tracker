# –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º–∏ –∞–Ω–∞–ª—ñ–∑—É –Ω–∞ –±–∞–∑—ñ AI

**–û—Å—Ç–∞–Ω–Ω—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** 18 –∂–æ–≤—Ç–Ω—è 2025
**–°—Ç–∞—Ç—É—Å:** –§–∞–∑–∞ 1 –∑–∞–≤–µ—Ä—à–µ–Ω–∞ (100%)
**–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è:** –ü–æ–≤–Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω-–≥–æ—Ç–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞ –∑ 16+ API endpoints

---

## –ó–º—ñ—Å—Ç

1. [–û–≥–ª—è–¥ —Å–∏—Å—Ç–µ–º–∏](#–æ–≥–ª—è–¥-—Å–∏—Å—Ç–µ–º–∏)
2. [–û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏](#–æ—Å–Ω–æ–≤–Ω—ñ-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏)
3. [–ñ–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª –∑–∞–ø—É—Å–∫—É –∞–Ω–∞–ª—ñ–∑—É](#–∂–∏—Ç—Ç—î–≤–∏–π-—Ü–∏–∫–ª-–∑–∞–ø—É—Å–∫—É-–∞–Ω–∞–ª—ñ–∑—É)
4. [–ú–æ–¥–µ–ª—ñ –¥–∞–Ω–∏—Ö](#–º–æ–¥–µ–ª—ñ-–¥–∞–Ω–∏—Ö)
5. [API Endpoints](#api-endpoints)
6. [–§–æ–Ω–æ–≤–∞ –æ–±—Ä–æ–±–∫–∞](#—Ñ–æ–Ω–æ–≤–∞-–æ–±—Ä–æ–±–∫–∞)
7. [–°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó](#—Å—Ç–∞—Ç—É—Å-—Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó)
8. [–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —ñ–Ω—à–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏](#—ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è-–∑-—ñ–Ω—à–∏–º–∏-—Å–∏—Å—Ç–µ–º–∞–º–∏)
9. [–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ](#—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏-–ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ)
10. [–ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏](#–Ω–∞—Å—Ç—É–ø–Ω—ñ-–∫—Ä–æ–∫–∏)

---

## –û–≥–ª—è–¥ —Å–∏—Å—Ç–µ–º–∏

–°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª—ñ–∑—É - —Ü–µ –¥–≤–æ—Å—Ç–∞–¥—ñ–π–Ω–∏–π –∫–æ–Ω–≤–µ—î—Ä –≤—ñ–¥ –∑–Ω–∞–Ω—å –¥–æ –∑–∞–¥–∞—á:

1. **–°—Ç–∞–¥—ñ—è –≤–∏–¥–æ–±—É–≤–∞–Ω–Ω—è –∑–Ω–∞–Ω—å** - –ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î –Ω–µ–æ–±—Ä–æ–±–ª–µ–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ –¢–µ–º–∏ —Ç–∞ –ê—Ç–æ–º–∏ (–∑–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏)
2. **–°—Ç–∞–¥—ñ—è –≥–µ–Ω–µ—Ä—É–≤–∞–Ω–Ω—è –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ–π –∑–∞–¥–∞—á** - –ê–Ω–∞–ª—ñ–∑—É—î –Ω–∞–∫–æ–ø–∏—á–µ–Ω—ñ –∑–Ω–∞–Ω–Ω—è –¥–ª—è –≥–µ–Ω–µ—Ä—É–≤–∞–Ω–Ω—è –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ–π –∑–∞–¥–∞—á –¥–ª—è –ø–æ–º–∏–ª–æ–∫, —Ñ—É–Ω–∫—Ü—ñ–π —Ç–∞ –ø–æ–ª—ñ–ø—à–µ–Ω—å

–¶–µ —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –∑–∞–±–µ–∑–ø–µ—á—É—î, —â–æ —Ä—ñ—à–µ–Ω–Ω—è –±–∞–∑—É—é—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å–æ–ª—ñ–¥–æ–≤–∞–Ω–∏—Ö, –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏—Ö –∑–Ω–∞–Ω–Ω—è—Ö, –∞ –Ω–µ –Ω–∞ –Ω–µ–æ–±—Ä–æ–±–ª–µ–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è—Ö.

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –≤–∏—Å–æ–∫–æ–≥–æ —Ä—ñ–≤–Ω—è

```
–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (–Ω–µ–æ–±—Ä–æ–±–ª–µ–Ω—ñ, –≤—Å—ñ –¥–∂–µ—Ä–µ–ª–∞)
    ‚Üì
–°–µ—Ä–≤—ñ—Å –≤–∏–¥–æ–±—É–≤–∞–Ω–Ω—è –∑–Ω–∞–Ω—å
    ‚îú‚îÄ –í–∏–¥–æ–±—É—Ç–∏ —Å—É—Ç–Ω–æ—Å—Ç—ñ —Ç–∞ –∑–∞–∫–æ–Ω–æ–º—ñ—Ä–Ω–æ—Å—Ç—ñ
    ‚îú‚îÄ –ì–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –≤–∫–ª–∞–¥–µ–Ω–Ω—è
    ‚Üì
–ü—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó —Ç–µ–º/–∞—Ç–æ–º—ñ–≤ (–û–ß–Ü–ö–£–Æ–¢–¨–°–Ø)
    ‚îú‚îÄ –ó–∞–ø—Ä–æ–ø–æ–Ω–æ–≤–∞–Ω—ñ —Ç–µ–º–∏
    ‚îú‚îÄ –ó–∞–ø—Ä–æ–ø–æ–Ω–æ–≤–∞–Ω—ñ –∞—Ç–æ–º–∏
    ‚îú‚îÄ –û—Ü—ñ–Ω–∫–∏ –≤–ø–µ–≤–Ω–µ–Ω–æ—Å—Ç—ñ
    ‚Üì
[–ü–ï–†–ï–ì–õ–Ø–î] –ó–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ª—é–¥–∏–Ω–æ—é
    ‚îú‚îÄ –ó–∞—Ç–≤–µ—Ä–¥–∏—Ç–∏/–≤—ñ–¥—Ö–∏–ª–∏—Ç–∏ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó
    ‚îú‚îÄ –ü–æ–∑–Ω–∞—á–∏—Ç–∏ –∑–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏
    ‚Üì
–¢–µ–º–∏/–ê—Ç–æ–º–∏ (–°–¢–í–û–†–ï–ù–Ü)
    ‚îú‚îÄ –ó–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω—ñ —Ç–µ–º–∏
    ‚îú‚îÄ –ê–≥—Ä–µ–≥–æ–≤–∞–Ω—ñ –∞—Ç–æ–º–∏
    ‚îú‚îÄ –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ –∑–Ω–∞–Ω–Ω—è
    ‚Üì
–ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª—ñ–∑—É (–û–ß–Ü–ö–£–Ñ–¢–¨–°–Ø)
    ‚îú‚îÄ –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä
    ‚îú‚îÄ –í–∏–±—Ä–∞—Ç–∏ —Ç–µ–º–∏/–∞—Ç–æ–º–∏ –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É
    ‚îú‚îÄ –í–∏–∑–Ω–∞—á–∏—Ç–∏ —á–∞—Å–æ–≤–∏–π –ø–µ—Ä—ñ–æ–¥
    ‚Üì
[–ó–ê–ü–£–©–ï–ù–û] –ê–Ω–∞–ª—ñ–∑ –Ω–∞–∫–æ–ø–∏—á–µ–Ω–∏—Ö –∑–Ω–∞–Ω—å
    ‚îú‚îÄ –û–±—Ä–æ–±–∏—Ç–∏ –∑–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω—ñ —Ç–µ–º–∏/–∞—Ç–æ–º–∏
    ‚îú‚îÄ –ì–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –≤–∫–ª–∞–¥–µ–Ω–Ω—è (—è–∫—â–æ RAG)
    ‚îú‚îÄ –ü–æ–±—É–¥—É–≤–∞—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑ —Ç–µ–º
    ‚îú‚îÄ –í–∏–∫–ª–∏–∫–∞—Ç–∏ LLM –¥–ª—è –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ–π –∑–∞–¥–∞—á
    ‚Üì
[–ó–ê–í–ï–†–®–ï–ù–û] –ì–µ–Ω–µ—Ä—É–≤–∞–Ω–Ω—è –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ–π –∑–∞–¥–∞—á
    ‚îú‚îÄ –ü—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó –∑–∞–¥–∞—á –∑ —Ç–µ–º/–∞—Ç–æ–º—ñ–≤
    ‚îú‚îÄ –ü—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó –ø–æ–º–∏–ª–æ–∫ –∑ –≤–∏—è–≤–ª–µ–Ω–∏—Ö –ø—Ä–æ–±–ª–µ–º
    ‚îú‚îÄ –ü—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó —Ñ—É–Ω–∫—Ü—ñ–π –∑ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ–π
    ‚îú‚îÄ –û—Ü—ñ–Ω–∫–∏ –≤–ø–µ–≤–Ω–µ–Ω–æ—Å—Ç—ñ
    ‚îú‚îÄ –õ–∞–Ω—Ü—é–∂–∫–∏ –º—ñ—Ä–∫—É–≤–∞–Ω—å
    ‚Üì
[–ü–ï–†–ï–ì–õ–Ø–î] –ó–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ª—é–¥–∏–Ω–æ—é
    ‚îú‚îÄ –ó–∞—Ç–≤–µ—Ä–¥–∏—Ç–∏/–≤—ñ–¥—Ö–∏–ª–∏—Ç–∏ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó
    ‚îú‚îÄ –†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ –º–µ—Ç—Ä–∏–∫–∏
    ‚îú‚îÄ –ü–æ–∑–Ω–∞—á–∏—Ç–∏ –∑–∞–ø—É—Å–∫ —è–∫ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏–π
    ‚Üì
[–ó–ê–ö–†–ò–¢–û] –ê—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
    ‚îî‚îÄ –ó–±–µ—Ä–µ–≥—Ç–∏ –¥–ª—è –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è/RAG
```

---

## –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

### 1. –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª—ñ–∑—É (Analysis Run)

–ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î –æ–¥–∏–Ω —Ü–∏–∫–ª –∞–Ω–∞–ª—ñ–∑—É –∑ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è–º –∂–∏—Ç—Ç—î–≤–∏–º —Ü–∏–∫–ª–æ–º.

**–ñ–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª (7 —Å—Ç–∞–Ω—ñ–≤):**
```
pending ‚Üí running ‚Üí completed ‚Üí review_required ‚Üí approved ‚Üí closed
                          ‚Üì
                        failed
```

**–ö–ª—é—á–æ–≤—ñ –ø–æ–ª—è:**
- `status`: –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω –∂–∏—Ç—Ç—î–≤–æ–≥–æ —Ü–∏–∫–ª—É
- `time_window_start/end`: –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É
- `total_messages_in_window`: –ö—ñ–ª—å–∫—ñ—Å—Ç—å –¥–æ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó
- `messages_after_prefilter`: –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø—ñ—Å–ª—è –¥–µ–¥—É–ø–ª—ñ–∫–∞—Ü—ñ—ó
- `config_snapshot`: JSONB –∫–æ–ø—ñ—è ProjectConfig (–≤—ñ–¥—Ç–≤–æ—Ä—é–≤–∞–Ω—ñ—Å—Ç—å)
- `accuracy_metrics`: –†—ñ–≤–µ–Ω—å –∑–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è, —Ä—ñ–≤–µ–Ω—å –≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è
- `error_log`: –î–µ—Ç–∞–ª—ñ –∑–±–æ—é —Ç–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è

### 2. –ü—Ä–æ–ø–æ–∑–∏—Ü—ñ—è –∑–∞–¥–∞—á—ñ (Task Proposal)

AI-–∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∞ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—è, –≤–∏–¥–æ–±—É—Ç–∞ –∑ –∑–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω–∏—Ö –¢–µ–º —Ç–∞ –ê—Ç–æ–º—ñ–≤ (–ù–ï –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å).

**–î–∂–µ—Ä–µ–ª–∞ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ–π –∑–∞–¥–∞—á:**
- –¢–µ–º–∏ (–∞–Ω–∞–ª—ñ–∑ –Ω–∞–∫–æ–ø–∏—á–µ–Ω–∏—Ö –∑–Ω–∞–Ω—å)
- –ê—Ç–æ–º–∏ (–≤–∏—è–≤–ª–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó)
- –ó–≤–æ—Ä–æ—Ç–Ω–∏–π –∑–≤'—è–∑–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó –ø–æ–ª—ñ–ø—à–µ–Ω–Ω—è)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```python
{
    "analysis_run_id": "uuid",
    "task_type": "bug|feature|question|insight",
    "title": "iOS crash –Ω–∞ login",
    "description": "–î–æ–¥–∞—Ç–æ–∫ –≤–∏–ª—ñ—Ç–∞—î –ø—Ä–∏ —Å–ø—Ä–æ–±—ñ –≤—Ö–æ–¥—É",
    "source_topic_ids": [1, 2],         # ‚Üê –ó —Ç–µ–º/–∞—Ç–æ–º—ñ–≤
    "source_atom_ids": [101, 102, 103], # ‚Üê –ó –∞—Ç–æ–º—ñ–≤, –Ω–µ –∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
    "confidence": 0.95,
    "recommendation": "APPROVE",  # –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è AI
    "reasoning": "–¢–µ–º–∞ –≤–∫–∞–∑—É—î –Ω–∞ –∫—ñ–ª—å–∫–∞ –ø—Ä–æ–±–ª–µ–º –≤—Ö–æ–¥—É iOS",
    "llm_metadata": {
        "model": "gpt-4",
        "tokens_used": 2000,
        "processing_time_ms": 1500
    },
    "user_approved": false,
    "approved_by": null
}
```

### 3. –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ø—Ä–æ–µ–∫—Ç—É (Project Configuration)

–í–∏–∑–Ω–∞—á–∞—î —Å—Ö–µ–º—É –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —Ç–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏.

**–ü—Ä–∏–∫–ª–∞–¥:**
```python
{
    "name": "Q4 2025 Analysis",
    "task_types": ["bug", "feature", "question"],
    "keywords": {
        "bug": ["crash", "error", "fail", "bug"],
        "feature": ["add", "implement", "feature", "new"],
        "question": ["?", "how", "why", "what"]
    },
    "classification_instructions": "...",
    "confidence_threshold": 0.75
}
```

---

## –ñ–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª –∑–∞–ø—É—Å–∫—É –∞–Ω–∞–ª—ñ–∑—É

!!! tip "7-—Å—Ç–∞–Ω–Ω–∏–π –∂–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª"
    –ü–æ–≤–Ω–∞ –º–∞—à–∏–Ω–∞ —Å—Ç–∞–Ω—É –∑ –æ–±—Ä–æ–±–∫–æ—é –ø–æ–º–∏–ª–æ–∫ —Ç–∞ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è–º.

### –°—Ç–∞–Ω–∏ –∂–∏—Ç—Ç—î–≤–æ–≥–æ —Ü–∏–∫–ª—É

```mermaid
graph LR
    PENDING([1. PENDING]) -->|–ü–æ—á–∞—Ç–∏| RUNNING([2. RUNNING])
    RUNNING -->|–£—Å–ø—ñ—à–Ω–æ| COMPLETED([3. COMPLETED])
    RUNNING -->|–ü–æ–º–∏–ª–∫–∞| FAILED([7. FAILED])

    COMPLETED -->|–ù–∏–∑—å–∫–∞ –≤–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å| REVIEW([4. REVIEW_REQUIRED])
    COMPLETED -->|–í–∏—Å–æ–∫–∞ –≤–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å| APPROVED([5. APPROVED])

    REVIEW -->|–ó–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ª—é–¥–∏–Ω–æ—é| APPROVED
    APPROVED -->|–ê—Ä—Ö—ñ–≤—É–≤–∞—Ç–∏| CLOSED([6. CLOSED])

    FAILED -->|–ü–æ–≤—Ç–æ—Ä| RUNNING

    style PENDING fill:#e3f2fd
    style RUNNING fill:#fff9c4
    style COMPLETED fill:#c8e6c9
    style REVIEW fill:#ffecb3
    style APPROVED fill:#a5d6a7
    style CLOSED fill:#90a4ae
    style FAILED fill:#ffcdd2
```

=== "–°—Ç–∞–Ω 1: PENDING"
    **–î—ñ—è:** –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —Å—Ç–≤–æ—Ä—é—î –∑–∞–ø—É—Å–∫ –∑ —á–∞—Å–æ–≤–∏–º –≤—ñ–∫–Ω–æ–º —Ç–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é

    **–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å:** –ú–∏—Ç—Ç—î–≤–æ

    **–ü–µ—Ä–µ—Ö—ñ–¥:** ‚Üí RUNNING (–ø—Ä–∏ –∑–∞–ø—É—Å–∫—É)

=== "–°—Ç–∞–Ω 2: RUNNING"
    **–î—ñ—è:** –§–æ–Ω–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è –æ–±—Ä–æ–±–ª—è—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

    **–ü—Ä–æ—Ü–µ—Å:**

    1. –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ —á–∞—Å–æ–≤–æ–º—É –≤—ñ–∫–Ω—ñ
    2. –ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä —à—É–º—É (—è–∫—â–æ —É–≤—ñ–º–∫–Ω–µ–Ω–æ)
    3. –ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –¥–µ–¥—É–ø–ª—ñ–∫–∞—Ü—ñ—é –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
    4. –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–∞–∫–µ—Ç–∏
    5. –ì–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –≤–∫–ª–∞–¥–µ–Ω–Ω—è (—è–∫—â–æ RAG)
    6. –ü–æ–±—É–¥—É–≤–∞—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑ –ø–æ–¥—ñ–±–Ω–∏—Ö –º–∏–Ω—É–ª–∏—Ö –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ–π
    7. –í–∏–∫–ª–∏–∫–∞—Ç–∏ LLM –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–∞–∫–µ—Ç—É
    8. –ó–±–µ—Ä–µ–≥—Ç–∏ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó

    **–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å:** –•–≤–∏–ª–∏–Ω–∏ –¥–æ –≥–æ–¥–∏–Ω (–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å)

    **–ü–µ—Ä–µ—Ö—ñ–¥:** ‚Üí COMPLETED (–ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ñ) –∞–±–æ FAILED (–ø—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ)

=== "–°—Ç–∞–Ω 3: COMPLETED"
    **–î—ñ—è:** –û–±—Ä–æ–±–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó –≥–æ—Ç–æ–≤—ñ

    **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –¥—ñ—ó:**

    - –†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ –º–µ—Ç—Ä–∏–∫–∏ —Ç–æ—á–Ω–æ—Å—Ç—ñ
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞—Ç–≤–µ—Ä–¥–∏—Ç–∏ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó –∑ –≤–∏—Å–æ–∫–æ—é –≤–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—é (>0.9)
    - –ü–æ–∑–Ω–∞—á–∏—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É: –Ω–∏–∑—å–∫–∞ –≤–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å –∞–±–æ –≥—Ä–∞–Ω–∏—á–Ω—ñ –≤–∏–ø–∞–¥–∫–∏

    **–ü–µ—Ä–µ—Ö—ñ–¥:** ‚Üí REVIEW_REQUIRED –∞–±–æ APPROVED

=== "–°—Ç–∞–Ω 4: REVIEW_REQUIRED"
    **–î—ñ—è:** –ü—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó –æ—á—ñ–∫—É—é—Ç—å –ª—é–¥—Å—å–∫–æ–≥–æ –ø–µ—Ä–µ–≥–ª—è–¥—É

    **–î—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:**

    - –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó –æ–¥–Ω—É –∑–∞ –æ–¥–Ω–æ—é
    - –ó–∞—Ç–≤–µ—Ä–¥–∏—Ç–∏/–≤—ñ–¥—Ö–∏–ª–∏—Ç–∏ –∑ –∫–æ–º–µ–Ω—Ç–∞—Ä–µ–º
    - –ü–∞–∫–µ—Ç–Ω–µ –∑–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ø–æ–¥—ñ–±–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤

    **–ü–µ—Ä–µ—Ö—ñ–¥:** ‚Üí APPROVED (–ø—ñ—Å–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –≤—Å—ñ—Ö)

=== "–°—Ç–∞–Ω 5: APPROVED"
    **–î—ñ—è:** –£—Å—ñ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç—ñ —Ç–∞ –∑–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω—ñ

    **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –¥—ñ—ó:**

    - –ê—Ä—Ö—ñ–≤—É–≤–∞—Ç–∏ –∑–∞–ø—É—Å–∫ –¥–ª—è —ñ—Å—Ç–æ—Ä–∏—á–Ω–æ—ó –¥–æ–≤—ñ–¥–∫–∏
    - –ó—Ä–æ–±–∏—Ç–∏ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó –¥–æ—Å—Ç—É–ø–Ω–∏–º–∏ –¥–ª—è –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É RAG
    - –ó–±–µ—Ä–µ–≥—Ç–∏ —Å–Ω—ñ–º–æ–∫ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –¥–ª—è –≤—ñ–¥—Ç–≤–æ—Ä—é–≤–∞–Ω–æ—Å—Ç—ñ

    **–ü–µ—Ä–µ—Ö—ñ–¥:** ‚Üí CLOSED

=== "–°—Ç–∞–Ω 6: CLOSED"
    **–î—ñ—è:** –ó–∞–ø—É—Å–∫ –∞—Ä—Ö—ñ–≤–æ–≤–∞–Ω–æ

    **–î–æ—Å—Ç—É–ø:** –¢—ñ–ª—å–∫–∏ –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è (–ª–∏—à–µ —ñ—Å—Ç–æ—Ä–∏—á–Ω–∞ –¥–æ–≤—ñ–¥–∫–∞)

=== "–°—Ç–∞–Ω 7: FAILED"
    **–®–ª—è—Ö–æ–º –ø–æ–º–∏–ª–∫–∏:** –ë—É–¥—å-—è–∫–∞ –ø–æ–º–∏–ª–∫–∞ –ø—ñ–¥ —á–∞—Å —Å—Ç–∞–Ω—É RUNNING

    **–í–∞—Ä—ñ–∞–Ω—Ç–∏ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è:**

    - –ü–æ–≤—Ç–æ—Ä –∑ –æ—Å—Ç–∞–Ω–Ω—å–æ—ó –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ—ó —Ç–æ—á–∫–∏
    - –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∑ –ø–æ—á–∞—Ç–∫—É
    - –†—É—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

---

## –ú–æ–¥–µ–ª—ñ –¥–∞–Ω–∏—Ö

### –ú–æ–¥–µ–ª—å AnalysisRun

```python
class AnalysisRun(IDMixin, TimestampMixin, SQLModel, table=True):
    id: UUID = Field(primary_key=True, default_factory=uuid4)

    # –ñ–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª
    status: str  # "pending", "running", "completed", "review_required",
                 # "approved", "closed", "failed"

    # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
    project_config_id: int
    config_snapshot: dict | None  # JSONB - –Ω–µ–∑–º—ñ–Ω–Ω–∞ –∫–æ–ø—ñ—è
    time_window_start: datetime
    time_window_end: datetime

    # –û–±—Ä–æ–±–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
    total_messages_in_window: int = 0
    messages_after_prefilter: int = 0
    messages_processed: int = 0

    # –ú–µ—Ç—Ä–∏–∫–∏
    proposals_generated: int = 0
    proposals_approved: int = 0
    proposals_rejected: int = 0
    accuracy_metrics: dict | None  # JSONB - —Ä—ñ–≤–µ–Ω—å –∑–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è —Ç–æ—â–æ

    # –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
    error_log: str | None
    error_details: dict | None  # JSONB

    # –ú–µ—Ç–∞–¥–∞–Ω—ñ –∂–∏—Ç—Ç—î–≤–æ–≥–æ —Ü–∏–∫–ª—É
    started_at: datetime | None
    completed_at: datetime | None
    reviewed_at: datetime | None
    closed_at: datetime | None
```

### –ú–æ–¥–µ–ª—å TaskProposal

```python
class TaskProposal(IDMixin, TimestampMixin, SQLModel, table=True):
    id: int = Field(primary_key=True)

    # –ê—Å–æ—Ü—ñ–∞—Ü—ñ—è
    analysis_run_id: UUID

    # –í–º—ñ—Å—Ç
    task_type: str  # "bug", "feature", "question", "insight"
    title: str
    description: str

    # –î–∂–µ—Ä–µ–ª–æ
    source_message_ids: list[int]  # PostgreSQL ARRAY

    # –í–∏—Ö—ñ–¥ AI
    confidence: float  # 0.0-1.0
    recommendation: str  # "APPROVE", "REVIEW", "REJECT"
    reasoning: str

    # –ú–µ—Ç–∞–¥–∞–Ω—ñ LLM
    llm_metadata: dict | None  # JSONB - –º–æ–¥–µ–ª—å, —Ç–æ–∫–µ–Ω–∏, –∑–∞—Ç—Ä–∏–º–∫–∞

    # –ó–≤–æ—Ä–æ—Ç–Ω–∏–π –∑–≤'—è–∑–æ–∫ –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
    user_approved: bool = False
    approved_by: str | None
    approval_timestamp: datetime | None

    # –û–±–º–µ–∂–µ–Ω–Ω—è
    __table_args__ = (
        CheckConstraint(
            "confidence >= 0.0 AND confidence <= 1.0",
            name="proposal_confidence_range"
        ),
    )
```

### –ú–æ–¥–µ–ª—å ProjectConfig

```python
class ProjectConfig(IDMixin, TimestampMixin, SQLModel, table=True):
    id: int = Field(primary_key=True)

    # –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
    name: str
    version: int = 1

    # –°—Ö–µ–º–∞ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
    task_types: list[str]  # ["bug", "feature", "question"]
    keywords: dict[str, list[str]]  # –¢–∏–ø ‚Üí —Å–ø–∏—Å–æ–∫ –∫–ª—é—á–æ–≤–∏—Ö —Å–ª—ñ–≤

    # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è LLM
    llm_provider_id: UUID
    classification_instructions: str
    confidence_threshold: float = 0.75

    # –û–±—Ä–æ–±–∫–∞
    max_batch_size: int = 50
    include_code_context: bool = True
    use_rag_context: bool = True
```

---

## API Endpoints

### –ó–∞–ø—É—Å–∫–∏ –∞–Ω–∞–ª—ñ–∑—É

**–°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–ø—É—Å–∫**
```
POST /api/v1/analysis/runs
{
    "project_config_id": 1,
    "time_window_start": "2025-10-01T00:00:00Z",
    "time_window_end": "2025-10-18T23:59:59Z"
}
–í—ñ–¥–ø–æ–≤—ñ–¥—å: 201
{
    "id": "uuid",
    "status": "pending",
    "created_at": "2025-10-18T12:00:00Z"
}
```

**–°–ø–∏—Å–æ–∫ –∑–∞–ø—É—Å–∫—ñ–≤**
```
GET /api/v1/analysis/runs?status=completed&limit=20
–í—ñ–¥–ø–æ–≤—ñ–¥—å: 200
[
    {"id": "uuid1", "status": "completed", ...},
    {"id": "uuid2", "status": "running", ...}
]
```

**–û—Ç—Ä–∏–º–∞—Ç–∏ –¥–µ—Ç–∞–ª—ñ –∑–∞–ø—É—Å–∫—É**
```
GET /api/v1/analysis/runs/{run_id}
–í—ñ–¥–ø–æ–≤—ñ–¥—å: 200
{
    "id": "uuid",
    "status": "running",
    "messages_processed": 45,
    "proposals_generated": 12,
    "accuracy_metrics": {...}
}
```

**–†–æ–∑–ø–æ—á–∞—Ç–∏ –∑–∞–ø—É—Å–∫**
```
POST /api/v1/analysis/runs/{run_id}/start?use_rag=true
–í—ñ–¥–ø–æ–≤—ñ–¥—å: 202
{"status": "running", "task_id": "background-job-id"}
```

### –ü—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó

**–°–ø–∏—Å–æ–∫ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ–π**
```
GET /api/v1/analysis/runs/{run_id}/proposals?status=needs_review
–í—ñ–¥–ø–æ–≤—ñ–¥—å: 200
[
    {
        "id": 123,
        "task_type": "bug",
        "title": "iOS crash",
        "confidence": 0.92,
        "recommendation": "APPROVE"
    }
]
```

**–ó–∞—Ç–≤–µ—Ä–¥–∏—Ç–∏ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—é**
```
POST /api/v1/proposals/{proposal_id}/approve
{
    "comment": "Valid bug report"
}
–í—ñ–¥–ø–æ–≤—ñ–¥—å: 200
{"status": "approved"}
```

**–í—ñ–¥—Ö–∏–ª–∏—Ç–∏ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—é**
```
POST /api/v1/proposals/{proposal_id}/reject
{
    "reason": "Duplicate of issue #1234"
}
–í—ñ–¥–ø–æ–≤—ñ–¥—å: 200
{"status": "rejected"}
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**–û—Ç—Ä–∏–º–∞—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞–ø—É—Å–∫—ñ–≤**
```
GET /api/v1/analysis/stats/runs
–í—ñ–¥–ø–æ–≤—ñ–¥—å: 200
{
    "total_runs": 42,
    "completed": 38,
    "running": 2,
    "failed": 2,
    "avg_duration_minutes": 15,
    "approval_rate": 0.87
}
```

---

## –§–æ–Ω–æ–≤–∞ –æ–±—Ä–æ–±–∫–∞

!!! note "–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è"
    –î–æ–≤–≥—ñ –∑–∞–≤–¥–∞–Ω–Ω—è –∞–Ω–∞–ª—ñ–∑—É –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è —É —Ñ–æ–Ω—ñ —á–µ—Ä–µ–∑ TaskIQ.

### –ó–∞–≤–¥–∞–Ω–Ω—è: execute_analysis_run

**–ó–∞–ø—É—Å–∫:** –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∏–∫–ª–∏–∫–∞—î `POST /api/v1/analysis/runs/{id}/start`

```mermaid
sequenceDiagram
    participant User
    participant API
    participant TaskIQ
    participant DB
    participant LLM
    participant WS as WebSocket

    User->>API: POST /api/v1/analysis/runs/{id}/start
    API->>TaskIQ: Queue execute_analysis_run(run_id)
    API-->>User: 202 Accepted {task_id}

    TaskIQ->>DB: Update status ‚Üí RUNNING
    TaskIQ->>DB: Fetch messages (with noise filter)
    TaskIQ->>DB: Prefilter (dedup)

    loop For each batch
        TaskIQ->>LLM: Generate embeddings (if RAG)
        TaskIQ->>DB: Find similar proposals (RAG)
        TaskIQ->>LLM: Classify batch with context
        TaskIQ->>DB: Save proposals
        TaskIQ->>WS: Broadcast progress
    end

    TaskIQ->>DB: Update status ‚Üí COMPLETED
    TaskIQ->>DB: Calculate metrics
    TaskIQ->>WS: Broadcast completion

    Note over TaskIQ,WS: Error handling:<br/>Store in error_log<br/>Mark as FAILED<br/>Preserve partial results
```

**–ü—Ä–æ—Ü–µ—Å:**

```python
async def execute_analysis_run(run_id: UUID, use_rag: bool = False):  # (1)!
    await executor.start_run(run_id)  # (2)!
    messages = await executor.fetch_messages(run_id)  # (3)!
    filtered = await executor.prefilter_messages(run_id, messages)  # (4)!
    batches = await executor.create_batches(filtered)  # (5)!

    for batch in batches:  # (6)!
        if use_rag:
            embeddings = await embedding_service.embed_batch(batch)
            context = await rag_builder.build_context(batch)

        proposals = await llm_service.generate_proposals(
            batch, project_config, rag_context=context if use_rag else None
        )

        await executor.save_proposals(run_id, proposals)
        await websocket_manager.broadcast({  # (7)!
            "type": "proposals_generated",
            "run_id": run_id,
            "count": len(proposals)
        })

    await executor.complete_run(run_id)  # (8)!
    await executor.calculate_metrics(run_id)
```

1. –ì–æ–ª–æ–≤–Ω–∞ —Ç–æ—á–∫–∞ –≤—Ö–æ–¥—É —Ñ–æ–Ω–æ–≤–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è
2. –ü–µ—Ä–µ–π—Ç–∏ –¥–æ —Å—Ç–∞–Ω—É RUNNING
3. –ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä —à—É–º—É –¥–ª—è –≤–∏–∫–ª—é—á–µ–Ω–Ω—è –Ω–∏–∑—å–∫–æ—è–∫—ñ—Å–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
4. –í–∏–¥–∞–ª–∏—Ç–∏ –¥—É–±–ª—ñ–∫–∞—Ç–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
5. –†–æ–∑–¥—ñ–ª–∏—Ç–∏ –Ω–∞ –ø–∞–∫–µ—Ç–∏ –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏
6. –û–±—Ä–æ–±–∏—Ç–∏ –∫–æ–∂–µ–Ω –ø–∞–∫–µ—Ç –∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º RAG
7. –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ —á–µ—Ä–µ–∑ WebSocket
8. –†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ –º–µ—Ç—Ä–∏–∫–∏ —Ç–æ—á–Ω–æ—Å—Ç—ñ —Ç–∞ –ø–µ—Ä–µ–π—Ç–∏ –¥–æ COMPLETED

!!! warning "–û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫"
    - –ó–±–æ—ó –ø–∞–∫–µ—Ç—ñ–≤ ‚Üí –ó–±–µ—Ä–µ–≥—Ç–∏ –ø–æ–º–∏–ª–∫—É, –ø–æ–∑–Ω–∞—á–∏—Ç–∏ FAILED
    - –ù–∞–¥–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –≤ error_log
    - –ó–±–µ—Ä–µ–≥—Ç–∏ —á–∞—Å—Ç–∫–æ–≤—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏

---

## –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### ‚úÖ –ü–û–í–ù–Ü–°–¢–Æ –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û (–ñ–æ–≤—Ç–µ–Ω—å 2025)

**–ú–æ–¥–µ–ª—ñ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö:**
- ‚úÖ AnalysisRun (7-—Å—Ç–∞–Ω–Ω–∏–π –∂–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª)
- ‚úÖ TaskProposal (–∑ –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏ LLM)
- ‚úÖ ProjectConfig (—Å—Ö–µ–º–∏ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó)
- ‚úÖ –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (–≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –∞–Ω–∞–ª—ñ–∑—É)
- ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Vector DB (–≤–∫–ª–∞–¥–µ–Ω–Ω—è)

**API Endpoints (16 endpoints):**
- ‚úÖ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞–ø—É—Å–∫–∞–º–∏ (CRUD, –∂–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª)
- ‚úÖ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—è–º–∏ (–≥–µ–Ω–µ—Ä—É–≤–∞–Ω–Ω—è, –ø–µ—Ä–µ–≥–ª—è–¥, –∑–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è/–≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è)
- ‚úÖ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ø—Ä–æ–µ–∫—Ç—É (–≤–µ—Ä—Å—ñ–æ–Ω—É–≤–∞–Ω–Ω—è, —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è)
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–∞ –º–µ—Ç—Ä–∏–∫–∏
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è WebSocket —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ (9 —Ç–∏–ø—ñ–≤ –ø–æ–¥—ñ–π)

**–°–µ—Ä–≤—ñ—Å–∏:**
- ‚úÖ AnalysisExecutor (—É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∂–∏—Ç—Ç—î–≤–∏–º —Ü–∏–∫–ª–æ–º)
- ‚úÖ LLMProposalService (–≥–µ–Ω–µ—Ä—É–≤–∞–Ω–Ω—è –∑ RAG)
- ‚úÖ MessagePrefilter (–¥–µ–¥—É–ø–ª—ñ–∫–∞—Ü—ñ—è)
- ‚úÖ MetricsCalculator (–≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Ç–æ—á–Ω–æ—Å—Ç—ñ)

**–§–æ–Ω–æ–≤—ñ –∑–∞–≤–¥–∞–Ω–Ω—è:**
- ‚úÖ execute_analysis_run (–æ—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω–≤–µ—î—Ä)
- ‚úÖ –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É —Ç–∞ —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—è
- ‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ —Ç–∞ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è

**Frontend:**
- ‚úÖ –°—Ç–æ—Ä—ñ–Ω–∫–∞ –∑–∞–ø—É—Å–∫—ñ–≤ –∞–Ω–∞–ª—ñ–∑—É (—Å–ø–∏—Å–æ–∫, —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è, –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥)
- ‚úÖ –°—Ç–æ—Ä—ñ–Ω–∫–∞ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ–π (–ø–µ—Ä–µ–≥–ª—è–¥, –∑–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è/–≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è, –ø–∞–∫–µ—Ç–Ω—ñ –¥—ñ—ó)
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è WebSocket —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
- ‚úÖ –Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ –ø—Ä–æ–≥—Ä–µ—Å—É —Ç–∞ –º–µ—Ç—Ä–∏–∫–∏

**–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:**
- ‚úÖ 48+ —Ç–µ—Å—Ç—ñ–≤, —è–∫—ñ –æ—Ö–æ–ø–ª—é—é—Ç—å –≤—Å—é —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å
- ‚úÖ –ü–æ–∫—Ä–∏—Ç—Ç—è –∫–æ–¥—É 82-85%
- ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏ –¥–ª—è –ø–æ–≤–Ω–æ–≥–æ –∫–æ–Ω–≤–µ—î—Ä—É
- ‚úÖ –ë–µ–∑–ø–µ–∫–∞ —Ç–∏–ø—ñ–≤ –∑ —Ä–µ–∂–∏–º–æ–º mypy strict

### üéØ –ü–æ—Å—Ç–∞–≤–ª–µ–Ω—ñ –∫–ª—é—á–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

‚úÖ **–ì–Ω—É—á–∫–∞ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è** - –í–∏–∑–Ω–∞—á—Ç–µ –≤–ª–∞—Å–Ω—ñ —Ç–∏–ø–∏ –∑–∞–¥–∞—á —Ç–∞ –∫–ª—é—á–æ–≤—ñ —Å–ª–æ–≤–∞
‚úÖ **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è RAG** - –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–µ –≥–µ–Ω–µ—Ä—É–≤–∞–Ω–Ω—è –∑ —ñ—Å—Ç–æ—Ä–∏—á–Ω–∏–º–∏ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—è–º–∏
‚úÖ **–û–Ω–æ–≤–ª–µ–Ω–Ω—è —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ** - WebSocket —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—è –ø—Ä–æ–≥—Ä–µ—Å—É
‚úÖ **–í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏ –ø–æ–º–∏–ª–∫–∞—Ö** - –ù–∞–¥—ñ–π–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –∑ –¥–µ—Ç–∞–ª—å–Ω–∏–º –ª–æ–≥—É–≤–∞–Ω–Ω—è–º
‚úÖ **–†–æ–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å –∑–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –≤–∏—Å–æ–∫–æ—ó –≤–ø–µ–≤–Ω–µ–Ω–æ—Å—Ç—ñ, –ø–æ–∑–Ω–∞—á–µ–Ω–Ω—è –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É
‚úÖ **–í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –º–µ—Ç—Ä–∏–∫** - –†—ñ–≤–Ω—ñ –∑–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è, —á–∞—Å –æ–±—Ä–æ–±–∫–∏, —Ç–æ—á–Ω—ñ—Å—Ç—å
‚úÖ **–ë–µ–∑–ø–µ–∫–∞ —Ç–∏–ø—ñ–≤** - –ü–æ–≤–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å mypy, –≤–∞–ª—ñ–¥–∞—Ü—ñ—è Pydantic

---

## –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —ñ–Ω—à–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

!!! tip "–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è —Å–∏—Å—Ç–µ–º–∏"
    –ë–µ–∑–ø–µ—Ä–µ—Ä–≤–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —Å–∏—Å—Ç–µ–º–∞–º–∏ —Ñ—ñ–ª—å—Ç—Ä—É–≤–∞–Ω–Ω—è —à—É–º—É —Ç–∞ –≤–µ–∫—Ç–æ—Ä–Ω–æ—ó –±–∞–∑–∏ –¥–∞–Ω–∏—Ö.

### –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è —Ñ—ñ–ª—å—Ç—Ä—É–≤–∞–Ω–Ω—è —à—É–º—É

–°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª—ñ–∑—É –ø–æ–≤–∞–∂–∞—î —Ä—ñ–≤–µ–Ω—å —Ñ—ñ–ª—å—Ç—Ä—É–≤–∞–Ω–Ω—è —à—É–º—É:

```python
# In fetch_messages()
messages = await db.execute(
    select(Message)
    .where(
        Message.sent_at >= start_time,  # (1)!
        Message.sent_at <= end_time,
        Message.exclude_from_analysis == False,  # (2)!
        Message.noise_classification.in_(["signal", "weak_signal"])  # (3)!
    )
)
```

1. –ß–∞—Å–æ–≤–µ –≤—ñ–∫–Ω–æ –≤–∏–∑–Ω–∞—á–µ–Ω–æ –∑–∞–ø—É—Å–∫–æ–º –∞–Ω–∞–ª—ñ–∑—É
2. –ü–æ–≤–∞–∂–∞–π—Ç–µ –≤–∏–∫–ª—é—á–µ–Ω–Ω—è —Ñ—ñ–ª—å—Ç—Ä—É —à—É–º—É
3. –û–±—Ä–æ–±–ª—è–π—Ç–µ –ª–∏—à–µ —Å–∏–≥–Ω–∞–ª—å–Ω—ñ —Ç–∞ —Å–ª–∞–±–∫—ñ —Å–∏–≥–Ω–∞–ª—å–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

**–ü–µ—Ä–µ–≤–∞–≥–∏:**

| –ü–µ—Ä–µ–≤–∞–≥–∞ | –í–ø–ª–∏–≤ |
|---------|-------|
| –ó–º–µ–Ω—à–µ–Ω–∞ –æ–±—Ä–æ–±–∫–∞ | –ù–∞ 80% –º–µ–Ω—à–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å |
| –ö—Ä–∞—â–∞ —è–∫—ñ—Å—Ç—å | –ù–µ–º–∞—î —à—É–º—É –≤ –Ω–∞–≤—á–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö |
| –ï–∫–æ–Ω–æ–º—ñ—è –≤–∏—Ç—Ä–∞—Ç | –ù–∏–∂—á—ñ –≤–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ LLM API |

### –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤–µ–∫—Ç–æ—Ä–Ω–æ—ó –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

!!! example "–ì–µ–Ω–µ—Ä—É–≤–∞–Ω–Ω—è, —Ä–æ–∑—à–∏—Ä–µ–Ω–µ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é RAG"
    –Ü—Å—Ç–æ—Ä–∏—á–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–∫—Ä–∞—â—É—î —è–∫—ñ—Å—Ç—å —Ç–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ–π.

```mermaid
sequenceDiagram
    participant Batch as Message Batch
    participant Embed as Embedding Service
    participant VDB as Vector DB
    participant RAG as RAG Builder
    participant LLM

    Batch->>Embed: Generate embeddings
    Embed->>VDB: Search similar proposals (top 5)
    VDB-->>RAG: Return similar items
    RAG->>RAG: Build context from history
    RAG->>LLM: Inject context into prompt
    LLM->>LLM: Generate proposals with context
    LLM-->>Batch: Return enhanced proposals
```

**–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è:**

```python
if use_rag:  # (1)!
    await embedding_service.embed_batch(batch)  # (2)!
    similar_proposals = await semantic_search.find_similar(  # (3)!
        embeddings, limit=5
    )
    context = await rag_builder.build_context(similar_proposals)  # (4)!
    proposals = await llm_service.generate_proposals(  # (5)!
        batch, config, rag_context=context
    )
```

1. RAG —É–≤—ñ–º–∫–Ω–µ–Ω–æ —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä API
2. –ì–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –≤–∫–ª–∞–¥–µ–Ω–Ω—è –¥–ª—è –ø–∞–∫–µ—Ç—É
3. –ó–Ω–∞–π—Ç–∏ —Ç–æ–ø-5 –ø–æ–¥—ñ–±–Ω–∏—Ö —ñ—Å—Ç–æ—Ä–∏—á–Ω–∏—Ö –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ–π
4. –ü–æ–±—É–¥—É–≤–∞—Ç–∏ –≤—ñ–¥—Ñ–æ—Ä–º–∞—Ç–æ–≤–∞–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è LLM
5. –†–æ–∑—à–∏—Ä–µ–Ω–µ –≥–µ–Ω–µ—Ä—É–≤–∞–Ω–Ω—è –∑ —ñ—Å—Ç–æ—Ä–∏—á–Ω–∏–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ñ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó, —è–∫—ñ –ø–æ—Å–∏–ª–∞—é—Ç—å—Å—è –Ω–∞ –ø–æ–¥—ñ–±–Ω—ñ –º–∏–Ω—É–ª—ñ —Ä—ñ—à–µ–Ω–Ω—è

---

## –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

| –û–ø–µ—Ä–∞—Ü—ñ—è | –¢–∏–ø–æ–≤–∞ | –ü—Ä–∏–º—ñ—Ç–∫–∏ |
|----------|--------|---------|
| –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (1000 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å) | <500ms | –ó–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è —Ñ—ñ–ª—å—Ç—Ä —à—É–º—É |
| –ü–æ–ø–µ—Ä–µ–¥–Ω—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è (–¥—É–±–ª—ñ–∫–∞—Ç–∏) | <200ms | –ï—Ñ–µ–∫—Ç–∏–≤–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º –¥–µ–¥—É–ø–ª—ñ–∫–∞—Ü—ñ—ó |
| –í–∏–∫–ª–∏–∫ LLM (50 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å) | 2-5s | –í–∫–ª—é—á–∞—î –∑–∞—Ç—Ä–∏–º–∫—É API |
| –û–±—Ä–æ–±–∫–∞ –ø–∞–∫–µ—Ç—É (1000 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å) | 10-20—Ö–≤ | –ó–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Ä–æ–∑–º—ñ—Ä—É –ø–∞–∫–µ—Ç—É |
| –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –º–µ—Ç—Ä–∏–∫ | <1s | –¢—ñ–ª—å–∫–∏ –∞–≥—Ä–µ–≥–∞—Ü—ñ—è |

---

## –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

### –ö–æ—Ä–æ—Ç–∫–æ- —Ç–∞ —Å–µ—Ä–µ–¥–Ω—å–æ—Å—Ç—Ä–æ–∫–æ–≤–∏–π –ø–µ—Ä—ñ–æ–¥ (Q4 2025)
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –Ω–∞–≤—á–∞–Ω–Ω—è –º–æ–¥–µ–ª—ñ –º–∞—à–∏–Ω–Ω–æ–≥–æ –Ω–∞–≤—á–∞–Ω–Ω—è –Ω–∞ –∑—ñ–±—Ä–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- [ ] –î–æ–¥–∞—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ—Ä–æ–≥—É –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ü–∏–∫–ª –Ω–∞–≤—á–∞–Ω–Ω—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –∑–≤'—è–∑–∫—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

### –î–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤–∏–π –ø–µ—Ä—ñ–æ–¥ (Q1 2026+)
- [ ] –†–æ–∑—à–∏—Ä–µ–Ω–∞ –¥–µ–¥—É–ø–ª—ñ–∫–∞—Ü—ñ—è –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ–π
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–æ–≤'—è–∑—É–≤–∞–Ω–Ω—è –∑–∞–¥–∞—á –∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- [ ] –°–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–µ –Ω–∞–≤—á–∞–Ω–Ω—è LLM –Ω–∞ –¥–∞–Ω–∏—Ö –ø—Ä–æ–µ–∫—Ç—É

---

## –ü–æ–≤'—è–∑–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

- **–§—ñ–ª—å—Ç—Ä—É–≤–∞–Ω–Ω—è —à—É–º—É:** –î–∏–≤. `NOISE_FILTERING.md`
- **–í–µ–∫—Ç–æ—Ä–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö:** –î–∏–≤. `VECTOR_DATABASE.md`
- **–û–≥–ª—è–¥ —Å–∏—Å—Ç–µ–º–∏:** –î–∏–≤. `OVERVIEW.md`

---

*–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –∫–æ–Ω—Å–æ–ª—ñ–¥—É—î –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É —Ç–∞ —Å—Ç–∞—Ç—É—Å —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Å–∏—Å—Ç–µ–º–∏ –∞–Ω–∞–ª—ñ–∑—É –Ω–∞ –±–∞–∑—ñ AI.*
