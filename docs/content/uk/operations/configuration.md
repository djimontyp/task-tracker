# Довідник конфігурації

**Останнє оновлення:** 26 жовтня 2025 р.
**Стан:** Завершено - Операційна фаза

---

## Зміст

1. [Огляд](#огляд)
2. [Довідник змінних середовища](#довідник-змінних-середовища)
3. [Домени конфігурації](#домени-конфігурації)
4. [Правила валідації](#правила-валідації)
5. [Міграція жорстко закодованих значень](#міграція-жорстко-закодованих-значень)
6. [Найкращі практики конфігурації](#найкращі-практики-конфігурації)
7. [Усунення неполадок](#усунення-неполадок)

---

## Огляд

Цей документ надає повне посилання для налаштування системи Task Tracker. Вся конфігурація керується через змінні середовища, використовуючи Pydantic Settings з валідацією типу та обмеженнями. Система читає конфігурацію з файлу `.env` при запуску (потрібен перезапуск сервісу для застосування змін).

**Ключові принципи:**
- Валідація з типобезпечністю через Pydantic
- Переваження змінних середовища для всіх налаштувань
- Розумні значення за замовчуванням для опціональних параметрів
- Обов'язкові параметри перевіряються при запуску

---

## Довідник змінних середовища

### Усі змінні

| Назва змінної | Категорія | Тип | Обов'язково | За замовчуванням | Опис |
|---------------|----------|------|-----------|---------|-------------|
| **Налаштування додатка** |
| `APP_NAME` | Додаток | string | Ні | Pulse Radar | Відображувальна назва додатка |
| `APP_DESCRIPTION` | Додаток | string | Ні | (див. нижче) | Текст опису додатка |
| `WEBAPP_URL` | Додаток | string | Ні | http://localhost:8000/webapp | URL веб-додатка для клієнтів |
| `API_BASE_URL` | Додаток | string | Ні | http://localhost:8000 | Базовий URL API для запитів клієнтів |
| `WEBHOOK_BASE_URL` | Додаток | string | Ні | http://localhost | Базовий URL кінцевої точки webhook |
| `LOG_LEVEL` | Додаток | string | Ні | INFO | Рівень журналювання: DEBUG, INFO, WARNING, ERROR |
| `ENCRYPTION_KEY` | Додаток | string | **Так** | (порожньо) | Ключ шифрування Fernet для зберігання облікових даних |
| **База даних** |
| `DATABASE_URL` | База даних | string | Ні | postgresql+asyncpg://postgres:postgres@localhost:5555/tasktracker | Рядок асинхронного підключення PostgreSQL |
| **Інтеграція Telegram Bot** |
| `TELEGRAM_BOT_TOKEN` | Telegram | string | **Так** | (порожньо) | Токен бота від @BotFather на Telegram |
| `TELEGRAM_API_ID` | Telegram | integer | Ні | None | ID API клієнта Telegram від my.telegram.org |
| `TELEGRAM_API_HASH` | Telegram | string | Ні | None | Хеш API клієнта Telegram від my.telegram.org |
| `TELEGRAM_SESSION_STRING` | Telegram | string | Ні | None | Попередньо згенерований рядок сеансу для режиму клієнта |
| **Налаштування LLM та AI** |
| `OLLAMA_BASE_URL` | LLM | string | Ні | http://localhost:11434 | Кінцева точка API Ollama (локальна розробка) |
| `OLLAMA_BASE_URL_DOCKER` | LLM | string | Ні | http://host.docker.internal:11434 | Кінцева точка API Ollama (контейнери Docker) |
| `RUNNING_IN_DOCKER` | LLM | boolean | Ні | false | Встановіть на true при запуску всередині Docker |
| `LLM_PROVIDER` | LLM | string | Ні | ollama | Постачальник LLM за замовчуванням: ollama, openai та ін. |
| `OLLAMA_MODEL` | LLM | string | Ні | mistral-nemo:12b-instruct-2407-q4_k_m | Ідентифікатор моделі Ollama за замовчуванням |
| **Черга завдань та брокер** |
| `TASKIQ_NATS_SERVERS` | TaskIQ | string | Ні | nats://nats:4222 | URL підключення брокера NATS |
| `TASKIQ_NATS_QUEUE` | TaskIQ | string | Ні | taskiq | Назва черги NATS для розподілу завдань |
| **Векторний пошук та вбудовування** |
| `OPENAI_EMBEDDING_MODEL` | Вбудовування | string | Ні | text-embedding-3-small | Назва моделі вбудовування OpenAI |
| `OPENAI_EMBEDDING_DIMENSIONS` | Вбудовування | integer | Ні | 1536 | Розміри вектора вбудовування OpenAI |
| `OLLAMA_EMBEDDING_MODEL` | Вбудовування | string | Ні | llama3 | Назва моделі вбудовування Ollama |
| `VECTOR_SIMILARITY_THRESHOLD` | Вбудовування | float | Ні | 0.7 | Мінімальний показник подібності (0.0-1.0) для векторного пошуку |
| `VECTOR_SEARCH_LIMIT` | Вбудовування | integer | Ні | 10 | Максимальна кількість результатів векторного пошуку (1-100) |
| `EMBEDDING_BATCH_SIZE` | Вбудовування | integer | Ні | 100 | Розмір партії для операцій вбудовування (1-1000) |

---

## Домени конфігурації

### Налаштування додатка

Налаштуйте метаінформацію додатка та кінцеві точки.

| Параметр | Тип | За замовчуванням | Опис |
|-----------|------|---------|-------------|
| `APP_NAME` | string | Pulse Radar | Відображувальна назва додатка в інтерфейсі |
| `APP_DESCRIPTION` | string | Довгий опис | Показується користувачам про систему |
| `WEBAPP_URL` | string | http://localhost:8000/webapp | URL, де вебдодаток доступний |
| `API_BASE_URL` | string | http://localhost:8000 | Кінцева точка API для запитів фронтенду |
| `WEBHOOK_BASE_URL` | string | http://localhost | Базовий URL для webhook Telegram |
| `LOG_LEVEL` | string | INFO | Рівень журналювання (DEBUG, INFO, WARNING, ERROR) |
| `ENCRYPTION_KEY` | string | (обов'язково) | Симетричний ключ шифрування Fernet для секретів |

**Використання**: Налаштуйте для вашого середовища розгортання. URL-адреси повинні бути доступні як з клієнтів, так і з інфраструктури Telegram.

### Налаштування бази даних

Підключіться до PostgreSQL для постійного зберігання.

| Параметр | Тип | За замовчуванням | Опис |
|-----------|------|---------|-------------|
| `DATABASE_URL` | string | postgresql+asyncpg://postgres:postgres@localhost:5555/tasktracker | Повний рядок асинхронного підключення |

**Формат рядка підключення:**
```
postgresql+asyncpg://username:password@host:port/database
```

**Компоненти:**
- `username`: користувач PostgreSQL (звичайно postgres)
- `password`: пароль користувача від POSTGRES_PASSWORD
- `host`: ім'я хосту бази даних (localhost або postgres)
- `port`: порт бази даних (5555 у Docker, 5432 стандарт)
- `database`: назва бази даних (tasktracker)

### Інтеграція Telegram Bot

Інтегруйтесь з Telegram для введення повідомлень.

| Параметр | Тип | За замовчуванням | Опис |
|-----------|------|---------|-------------|
| `TELEGRAM_BOT_TOKEN` | string | (обов'язково) | Токен бота від @BotFather |
| `TELEGRAM_API_ID` | integer | None | ID API клієнта (опціонально, для розширених функцій) |
| `TELEGRAM_API_HASH` | string | None | Хеш API клієнта (опціонально) |
| `TELEGRAM_SESSION_STRING` | string | None | Попередньо згенерований сеанс (опціонально) |

**Обов'язково**: Лише `TELEGRAM_BOT_TOKEN` обов'язково для базового введення webhook.

**Опціональні функції**: ID API, хеш та сеанс дозволяють розширені функції режиму клієнта (за замовчуванням не використовуються).

### Налаштування LLM та AI

Налаштуйте мовні моделі для аналізу вмісту.

| Параметр | Тип | За замовчуванням | Опис |
|-----------|------|---------|-------------|
| `OLLAMA_BASE_URL` | string | http://localhost:11434 | Кінцева точка Ollama (розробка) |
| `OLLAMA_BASE_URL_DOCKER` | string | http://host.docker.internal:11434 | Кінцева точка Ollama (Docker) |
| `RUNNING_IN_DOCKER` | boolean | false | Встановіть на true в контейнеризованих середовищах |
| `LLM_PROVIDER` | string | ollama | Назва активного постачальника LLM |
| `OLLAMA_MODEL` | string | mistral-nemo:12b-instruct-2407-q4_k_m | Модель Ollama за замовчуванням |

**Вибір постачальника**: Система автоматично вибирає правильний URL на основі прапорця `RUNNING_IN_DOCKER`.

**Вибір моделі**: Модель повинна бути попередньо завантажена в Ollama перед використанням. Коригуйте на основі доступної пам'яті GPU та вимог швидкості виводу.

### Налаштування черги завдань та брокера

Налаштуйте обробку фонових завдань через NATS.

| Параметр | Тип | За замовчуванням | Опис |
|-----------|------|---------|-------------|
| `TASKIQ_NATS_SERVERS` | string | nats://nats:4222 | URL підключення брокера NATS |
| `TASKIQ_NATS_QUEUE` | taskiq | string | Назва черги для маршрутизації завдань |

**Підключення**: Формат - `nats://hostname:port`. У Docker ім'я хосту - `nats`.

### Векторний пошук та вбудовування

Налаштуйте операції семантичного пошуку та вбудовування.

| Параметр | Тип | За замовчуванням | Діапазон | Опис |
|-----------|------|---------|-------|-------------|
| `OPENAI_EMBEDDING_MODEL` | string | text-embedding-3-small | — | Назва моделі OpenAI для вбудовування |
| `OPENAI_EMBEDDING_DIMENSIONS` | integer | 1536 | — | Розміри вектора (варіюються за моделлю) |
| `OLLAMA_EMBEDDING_MODEL` | string | llama3 | — | Назва моделі Ollama для вбудовування |
| `VECTOR_SIMILARITY_THRESHOLD` | float | 0.7 | 0.0-1.0 | Мінімальний показник подібності для збігів |
| `VECTOR_SEARCH_LIMIT` | integer | 10 | 1-100 | Максимум результатів пошуку |
| `EMBEDDING_BATCH_SIZE` | integer | 100 | 1-1000 | Розмір партії для обробки |

**Налаштування порогу:**
- Нижчий поріг (0.5-0.6): Більше результатів, нижча точність
- За замовчуванням (0.7): Збалансована точність та повнота
- Вищий поріг (0.8-0.9): Менше результатів, вища точність

---

## Правила валідації

### Валідація типу

Усі змінні середовища перевіряються на коректність типу:

| Тип | Валідація | Приклад |
|------|-----------|---------|
| `string` | Будь-яке текстове значення | "mistral-nemo:12b" |
| `integer` | Тільки цілі числа | "1536" |
| `boolean` | "true" або "false" (регістронезалежно) | "true", "false" |
| `float` | Десяткові числа | "0.7" |

**Неправильні приклади:**
- Встановлення `VECTOR_SIMILARITY_THRESHOLD=invalid` → TypeError
- Встановлення `VECTOR_SEARCH_LIMIT=10.5` → ValueError (повинне бути integer)
- Встановлення `EMBEDDING_BATCH_SIZE=negative` → ValueError

### Обмеження діапазону

Числові поля мають мінімальні та максимальні обмеження:

| Змінна | Мін | Макс | Призначення |
|----------|-----|-----|---------|
| `VECTOR_SIMILARITY_THRESHOLD` | 0.0 | 1.0 | Подібність повинна бути ймовірністю |
| `VECTOR_SEARCH_LIMIT` | 1 | 100 | Розумні межі результатів пошуку |
| `EMBEDDING_BATCH_SIZE` | 1 | 1000 | Енергоефективне групування |

**Неправильні приклади:**
- `VECTOR_SIMILARITY_THRESHOLD=1.5` → Поза діапазоном (> 1.0)
- `VECTOR_SEARCH_LIMIT=0` → Поза діапазоном (< 1)
- `EMBEDDING_BATCH_SIZE=5000` → Поза діапазоном (> 1000)

### Обов'язкові поля

Ці змінні **повинні** бути встановлені або додаток не запуститься:

| Змінна | Наслідок |
|----------|-------------|
| `TELEGRAM_BOT_TOKEN` | Введення webhook неможливе |
| `ENCRYPTION_KEY` | Неможливо зберігати зашифровані облікові дані |

**Помилка при відсутності:**
```
ValidationError: TELEGRAM_BOT_TOKEN must not be empty
ValidationError: ENCRYPTION_KEY must be provided
```

### Значення за замовчуванням

Опціональні змінні мають розумні значення за замовчуванням та працюватимуть без конфігурації:

- `OLLAMA_BASE_URL`: За замовчуванням до розробки на localhost
- `DATABASE_URL`: Підключається до сервісу Docker postgres
- `LOG_LEVEL`: Встановлено в INFO (відповідне для продакшену)
- `VECTOR_SIMILARITY_THRESHOLD`: 0.7 (збалансована точність)

---

## Міграція жорстко закодованих значень

Система містить жорстко закодовані операційні параметри, які мають бути перенесені в змінні середовища. Цей розділ відстежує необхідну конфігурацію для оптимальної продуктивності.

### ВИСОКА пріоритетність: Критичні пороги

Ці параметри безпосередньо впливають на поведінку системи та завжди мають бути конфігурованими.

| Параметр | Поточне значення | Файл:Рядок | Призначення | Валідація |
|-----------|---------------|-----------|---------|-----------|
| Мінімум повідомлень для видобування знань | 10 | tasks.py:15 | Тригер автовидобування | 1-100 |
| Години ретроспективи видобування знань | 24 | tasks.py:16 | Часове вікно для очікуючих повідомлень | 1-168 |
| Поріг класифікації шуму | 0.3 | importance_scorer.py:292 | Межа оцінки шуму | 0.0-1.0 |
| Поріг класифікації сигналу | 0.7 | importance_scorer.py:294 | Межа оцінки сигналу | 0.0-1.0 |
| Коефіцієнт ваги вмісту | 0.4 | importance_scorer.py:289 | Вага розрахунку важливості | 0.0-1.0 |
| Коефіцієнт ваги автора | 0.2 | importance_scorer.py:289 | Вага розрахунку важливості | 0.0-1.0 |
| Часове вікно партії запуску аналізу | 600 (секунди) | analysis_service.py:516 | Максимальний розрив для групування повідомлень | 60-3600 |
| Обмеження розміру партії запуску аналізу | 50 | analysis_service.py:516 | Макс повідомлень за партію аналізу | 10-500 |

**Рекомендація**: Перенесіть негайно. Ці пороги потребують операційного налаштування та не повинні бути жорстко закодовані.

### СЕРЕДНЯ пріоритетність: Операційне налаштування

Ці параметри налаштовують продуктивність системи, але мають розумні значення за замовчуванням.

| Параметр | Поточне значення | Файл:Рядок | Призначення | Пріоритетність |
|-----------|---------------|-----------|---------|----------|
| Розмір партії вбудовування | 100 | tasks.py:768, 818 | Ефективність обробки партій | Операції на партіях |
| Поріг довжини повідомлення (оцінювання) | 10, 50, 200 | importance_scorer.py:94-99 | Точки розділу оцінювання вмісту | Розрахунок важливості |
| Пороги часової оцінки | 1h, 24h, 168h | importance_scorer.py:185-192 | Часові вікна оцінки актуальності | Розрахунок важливості |
| Пороги розміру теми | 50, 10 | importance_scorer.py:244-248 | Важливість теми за розміром | Розрахунок важливості |
| RAG контекст top_k | 5 | rag_context_builder.py:63 | Подібні елементи на категорію | Якість контексту |
| Обмеження об'єднаного тексту | 1000 символів | rag_context_builder.py:98 | Макс контекст для вбудовування | Енергоефективність |
| Попередній фільтр довжини повідомлення | 10 символів | analysis_service.py:473 | Фільтрування спамових повідомлень | Якість даних |

**Рекомендація**: Перенесіть як вторинний пріоритет. Корисно для налаштування продуктивності без змін коду.

### НИЗЬКА пріоритетність: Відображення та форматування

Ці параметри впливають на відображення, але мають мінімальний вплив на поведінку системи.

| Параметр | Поточне значення | Файл:Рядок | Призначення |
|-----------|---------------|-----------|---------|
| Скорочення вмісту | 200 символів | rag_context_builder.py | Довжина тексту попереду |
| Інтервал оновлення прогресу | 10 повідомлень | tasks.py:635 | Частота трансляції WebSocket |
| Набір ключових слів шуму | 13 ключових слів | importance_scorer.py:27 | Низькоцінні шаблони |
| Набір ключових слів сигналу | 14 ключових слів | importance_scorer.py:28-44 | Високоцінні шаблони |
| Обмеження векторного пошуку за замовчуванням | 10 | semantic_search_service.py:43 | Кількість результатів |

**Рекомендація**: Перенесіть після критичних елементів. Розглянути керовані з бази даних ключові слова замість конфігурації.

### Вимоги до міграції

Для кожного жорстко закодованого значення надайте:
1. Назву змінної середовища (наприклад, `KNOWLEDGE_EXTRACTION_THRESHOLD`)
2. Оголошення типу (integer, float, string)
3. Обмеження валідації (мін, макс, допустимі значення)
4. Значення за замовчуванням, що відповідає поточній поведінці
5. Документація призначення та впливу

---

## Найкращі практики конфігурації

### Налаштування змінних середовища

**1. Створіть файл `.env` з `.env.example`**

Файл `.env.example` у корені проекту надає шаблон:

```
cp .env.example .env
```

Відредагуйте `.env` з вашими значеннями. Цей файл gitignored та ніколи не повинен бути зафіксований.

**2. Обов'язкові поля для запуску**

Перед запуском сервісів переконайтесь, що встановлені:
- `TELEGRAM_BOT_TOKEN` - від @BotFather
- `ENCRYPTION_KEY` - генеруйте за допомогою Python: `from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())`

**3. Значення для конкретного середовища**

Змініть їх для кожного середовища:
- `APP_NAME`, `APP_DESCRIPTION` - для ідентифікації середовища
- `WEBHOOK_BASE_URL` - повинен відповідати вашому домену розгортання
- `API_BASE_URL` - повинен бути доступним з клієнтів
- `WEBAPP_URL` - де розташовується фронтенд
- `LOG_LEVEL` - DEBUG для розробки, INFO для продакшену

### Управління секретами

**API ключі та облікові дані:**
- Ніколи не фіксуйте `.env` у контролі версій
- Використовуйте сильний `ENCRYPTION_KEY` (генерує ~50 символів)
- Ротуйте `TELEGRAM_BOT_TOKEN` якщо скомпрометований
- Зберігайте `.env` безпечно на серверах продакшену

**Перевірка:**
```
# Перевірьте, що ключ шифрування встановлено
echo $ENCRYPTION_KEY | wc -c  # Повинно бути ~45+ символів
```

### Конфігурації для конкретного середовища

**Розробка**:
- `OLLAMA_BASE_URL=http://localhost:11434`
- `RUNNING_IN_DOCKER=false`
- `LOG_LEVEL=DEBUG`
- `DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5555/tasktracker`

**Розробка Docker Compose**:
- `OLLAMA_BASE_URL_DOCKER=http://host.docker.internal:11434`
- `RUNNING_IN_DOCKER=true`
- Ті ж інші налаштування

**Продакшен**:
- `OLLAMA_BASE_URL=http://ollama-service:11434` (внутрішній)
- `LOG_LEVEL=INFO`
- `DATABASE_URL=postgresql+asyncpg://postgres:PASSWORD@db-server:5432/tasktracker`
- Усі URL-адреси повинні використовувати реальні доменні імена

### Обов'язкові комбінації параметрів

**Для базової операції:**
- Потребує: `TELEGRAM_BOT_TOKEN`, `ENCRYPTION_KEY`
- База даних: Використовує за замовчуванням DATABASE_URL, підключаючись до Docker postgres
- LLM: Використовує налаштування Ollama за замовчуванням

**Для розгортання продакшену:**
- Усі базові параметри
- Реальний домен у `WEBHOOK_BASE_URL`, `API_BASE_URL`, `WEBAPP_URL`
- Сильний `ENCRYPTION_KEY`
- Облікові дані і хост продакшен-бази даних
- `LOG_LEVEL=INFO` або `WARNING`

**Для розширених функцій Telegram:**
- Базові параметри
- Плюс: `TELEGRAM_API_ID`, `TELEGRAM_API_HASH`, `TELEGRAM_SESSION_STRING`
- Дозволяє функції режиму клієнта (за замовчуванням не використовуються)

### Загальні помилки конфігурації

| Помилка | Симптом | Рішення |
|---------|---------|----------|
| Порожній `TELEGRAM_BOT_TOKEN` | "Webhook не може ініціалізуватися" | Отримайте токен від @BotFather на Telegram |
| Неправильний `WEBHOOK_BASE_URL` | Telegram не може досягти webhook | Використовуйте публічний домен, тестуйте через curl |
| Неправильний `ENCRYPTION_KEY` | "Неправильний формат ключа шифрування" | Генеруйте за допомогою Fernet.generate_key() |
| `RUNNING_IN_DOCKER=false` у контейнері | "Підключення відмовлено до Ollama" | Встановіть на `true`, використовуйте Docker-специфічний URL |
| `VECTOR_SIMILARITY_THRESHOLD=2.0` | Помилка валідації типу | Повинно бути 0.0-1.0 |
| Відсутній `DATABASE_URL` у продакшені | Не може підключитися до бази даних | Явно встановіть рядок підключення |

---

## Усунення неполадок

### Додаток не запускається

**Помилка: "TELEGRAM_BOT_TOKEN must not be empty"**
- Перевірьте, що файл `.env` існує та доступний для читання
- Переконайтесь, що `TELEGRAM_BOT_TOKEN` має значення (не просто ключ без значення)
- Регенеруйте токен від @BotFather якщо потрібно

**Помилка: "ENCRYPTION_KEY must be provided"**
- Генеруйте ключ: `python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"`
- Додайте до `.env`: `ENCRYPTION_KEY=your_generated_key_here`
- Перезапустіть сервіс

### Проблеми з підключенням до бази даних

**Помилка: "Connection refused to postgresql"**
- Переконайтесь, що PostgreSQL запущена: `docker compose logs postgres`
- Перевірьте, що формат `DATABASE_URL` правильний
- Переконайтесь, що порт 5555 (або налаштований порт) доступний
- Переконайтесь, що база даних `tasktracker` існує

**Помилка: "could not translate host name "postgres" to address"**
- Використовується неправильне ім'я хосту поза Docker
- Розробка: Використовуйте `localhost`
- Docker: Використовуйте `postgres`
- Переконайтесь, що прапорець `RUNNING_IN_DOCKER` відповідає середовищу

### Збої підключення LLM

**Помилка: "Connection refused to http://localhost:11434"**
- Ollama не запущена: `ollama serve`
- Неправильний URL: Розробка використовує localhost, Docker використовує `host.docker.internal`
- Перевірьте, що прапорець `RUNNING_IN_DOCKER` встановлено правильно

**Помилка: "Model 'mistral-nemo:12b' not found"**
- Завантажте модель спочатку: `ollama pull mistral-nemo:12b-instruct-2407-q4_k_m`
- Перевірьте, що значення `OLLAMA_MODEL` відповідає доступній моделі
- Список доступних: `ollama list`

### Webhook не отримує повідомлення

**Помилка: "Telegram cannot reach webhook"**
- Перевірьте, що `WEBHOOK_BASE_URL` загально доступна
- Переконайтесь, що брандмауер дозволяє порт 443 (HTTPS)
- Тестуйте підключення: `curl -I https://your-domain.com/webhook/telegram`
- Перевірьте журналі: `docker compose logs api | grep webhook`

**Помилка: "Invalid webhook URL"**
- Повинна використовувати HTTPS (вимога Telegram)
- Повинна бути публічним доменом (не localhost або IP)
- Повинна повертати 200 OK на GET запит
- Повинна приймати POST запити

### Помилки валідації конфігурації

**Помилка: "VECTOR_SIMILARITY_THRESHOLD: 1.5 is not less than or equal to 1.0"**
- Значення поза дійсним діапазоном (0.0-1.0)
- Перевірьте значення `.env`: `VECTOR_SIMILARITY_THRESHOLD=0.8` (дійсне)

**Помилка: "EMBEDDING_BATCH_SIZE: 'abc' is not a valid integer"**
- Невідповідність типу: повинно бути цілим числом
- Перевірьте значення `.env`: `EMBEDDING_BATCH_SIZE=100` (не "abc")

**Помилка: "RUNNING_IN_DOCKER: 'yes' is not a valid boolean"**
- Boolean повинно бути "true" або "false"
- Перевірьте значення `.env`: `RUNNING_IN_DOCKER=true` (не "yes")

### Проблеми з продуктивністю

**Повільні операції вбудовування**
- Перевірьте `EMBEDDING_BATCH_SIZE`: збільшите якщо пам'ять доступна (за замовчуванням 100)
- Перевірьте `OLLAMA_MODEL`: переконайтесь, що достатня пам'ять GPU для моделі
- Контролюйте: `docker compose logs worker | grep embedding`

**Повільні результати векторного пошуку**
- Перевірьте `VECTOR_SEARCH_LIMIT`: зменшите якщо відбувається timeout
- Перевірьте `VECTOR_SIMILARITY_THRESHOLD`: збільшите для зменшення обчислень
- Переконайтесь, що існує індекс pgvector в Postgres

**Високе використання пам'яті**
- Зменшите `EMBEDDING_BATCH_SIZE` (за замовчуванням 100)
- Зменшите `VECTOR_SEARCH_LIMIT` (за замовчуванням 10)
- Перевірьте розмір моделі Ollama: `ollama list`

---

**Кінець довідника конфігурації**

**Пов'язана документація:**
- [Архітектура системи](../architecture/overview.md) - Загальний дизайн системи
- [Потік подій](../event-flow.md) - Конвеєр обробки повідомлень
- [Видобування знань](../knowledge-extraction.md) - Деталі системи знань
