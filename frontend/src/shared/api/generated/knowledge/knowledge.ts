/**
 * Generated by orval v7.13.2 ðŸº
 * Do not edit manually.
 * Pulse Radar API
 * Feel the heartbeat of your projects
 * OpenAPI spec version: 1.0.0
 */
import {
  useMutation
} from '@tanstack/react-query';
import type {
  MutationFunction,
  QueryClient,
  UseMutationOptions,
  UseMutationResult
} from '@tanstack/react-query';

import type {
  HTTPValidationError,
  KnowledgeExtractionRequest,
  KnowledgeExtractionResponse
} from '../../model';

import { customInstance } from '../../../lib/api/mutator';




/**
 * Trigger manual knowledge extraction from selected messages.

Queues a background task to analyze messages and extract:
- **Topics**: Discussion themes and contexts
- **Atoms**: Atomic knowledge units (problems, solutions, decisions, insights)
- **Links**: Relationships between atoms

The task processes messages in batches and broadcasts real-time updates via WebSocket.

**Message Selection Methods:**
1. **Direct IDs**: Provide `message_ids` list (1-100, 10-50 recommended)
2. **Time Period**: Provide `period` object with:
   - `period_type`: "last_24h", "last_7d", "last_30d", or "custom"
   - `topic_id`: Optional topic filter
   - `start_date`, `end_date`: Required for custom periods

**WebSocket Events:**
- `knowledge.extraction_started` - Extraction begins
- `knowledge.topic_created` - New topic created
- `knowledge.atom_created` - New atom created
- `knowledge.version_created` - Version created for existing entity
- `knowledge.extraction_completed` - Extraction finished
- `knowledge.extraction_failed` - Extraction failed

**Recommended batch size:** 10-50 messages for optimal extraction quality.

Args:
    request: Extraction request with message IDs/period and agent config
    db: Database session

Returns:
    Response confirming extraction task was queued

Raises:
    HTTPException 404: If agent config not found
    HTTPException 400: If request validation fails or no messages found
 * @summary Trigger Knowledge Extraction
 */
export const triggerKnowledgeExtractionApiV1KnowledgeExtractPost = (
    knowledgeExtractionRequest: KnowledgeExtractionRequest,
 signal?: AbortSignal
) => {
      
      
      return customInstance<KnowledgeExtractionResponse>(
      {url: `/api/v1/knowledge/extract`, method: 'POST',
      headers: {'Content-Type': 'application/json', },
      data: knowledgeExtractionRequest, signal
    },
      );
    }
  


export const getTriggerKnowledgeExtractionApiV1KnowledgeExtractPostMutationOptions = <TError = HTTPValidationError,
    TContext = unknown>(options?: { mutation?:UseMutationOptions<Awaited<ReturnType<typeof triggerKnowledgeExtractionApiV1KnowledgeExtractPost>>, TError,{data: KnowledgeExtractionRequest}, TContext>, }
): UseMutationOptions<Awaited<ReturnType<typeof triggerKnowledgeExtractionApiV1KnowledgeExtractPost>>, TError,{data: KnowledgeExtractionRequest}, TContext> => {

const mutationKey = ['triggerKnowledgeExtractionApiV1KnowledgeExtractPost'];
const {mutation: mutationOptions} = options ?
      options.mutation && 'mutationKey' in options.mutation && options.mutation.mutationKey ?
      options
      : {...options, mutation: {...options.mutation, mutationKey}}
      : {mutation: { mutationKey, }};

      


      const mutationFn: MutationFunction<Awaited<ReturnType<typeof triggerKnowledgeExtractionApiV1KnowledgeExtractPost>>, {data: KnowledgeExtractionRequest}> = (props) => {
          const {data} = props ?? {};

          return  triggerKnowledgeExtractionApiV1KnowledgeExtractPost(data,)
        }

        


  return  { mutationFn, ...mutationOptions }}

    export type TriggerKnowledgeExtractionApiV1KnowledgeExtractPostMutationResult = NonNullable<Awaited<ReturnType<typeof triggerKnowledgeExtractionApiV1KnowledgeExtractPost>>>
    export type TriggerKnowledgeExtractionApiV1KnowledgeExtractPostMutationBody = KnowledgeExtractionRequest
    export type TriggerKnowledgeExtractionApiV1KnowledgeExtractPostMutationError = HTTPValidationError

    /**
 * @summary Trigger Knowledge Extraction
 */
export const useTriggerKnowledgeExtractionApiV1KnowledgeExtractPost = <TError = HTTPValidationError,
    TContext = unknown>(options?: { mutation?:UseMutationOptions<Awaited<ReturnType<typeof triggerKnowledgeExtractionApiV1KnowledgeExtractPost>>, TError,{data: KnowledgeExtractionRequest}, TContext>, }
 , queryClient?: QueryClient): UseMutationResult<
        Awaited<ReturnType<typeof triggerKnowledgeExtractionApiV1KnowledgeExtractPost>>,
        TError,
        {data: KnowledgeExtractionRequest},
        TContext
      > => {

      const mutationOptions = getTriggerKnowledgeExtractionApiV1KnowledgeExtractPostMutationOptions(options);

      return useMutation(mutationOptions, queryClient);
    }
    