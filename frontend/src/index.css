@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* ═══════════════════════════════════════════════════════════════
       BASE COLORS (Source of Truth) - Light Mode
       ═══════════════════════════════════════════════════════════════ */
    --color-green: 130 65% 45%;       /* Shifted from 142° for teal separation */
    --color-red: 0 78% 54%;
    --color-blue: 217 85% 42%;      /* WCAG AA compliant (was 51%) */
    --color-amber: 38 92% 50%;
    --color-purple: 280 65% 48%;    /* WCAG AA compliant (was 58%) */
    --color-cyan: 197 71% 45%;
    --color-violet: 260 65% 55%;
    --color-indigo: 230 65% 50%;      /* Between blue (217°) and violet (260°) */

    /* ═══════════════════════════════════════════════════════════════
       LIGHT THEME - Elevation & Structure
       ═══════════════════════════════════════════════════════════════ */
    --background: 220 14% 96%;      /* Soft cool gray (was pure #FFF) */
    --foreground: 20 14.3% 4.1%;
    --card: 0 0% 100%;              /* Pure white for elevation */
    --card-foreground: 20 14.3% 4.1%;
    --popover: 0 0% 100%;
    --popover-foreground: 20 14.3% 4.1%;
    --primary: 172 66% 28%;           /* Teal - darker for WCAG AA (was 40%) */
    --primary-foreground: 0 0% 100%;  /* White text - now 4.5:1 contrast */
    --primary-bright: 172 66% 36%;    /* Active nav/tabs - balanced visibility */
    --secondary: 60 4.8% 95.9%;
    --secondary-foreground: 24 9.8% 10%;
    --muted: 60 4.8% 95.9%;
    --muted-foreground: 25 5.3% 33.3%;
    --accent: 38 51% 50%;
    --accent-foreground: 24 9.8% 10%;
    --accent-light: 38 60% 59%;
    --accent-dark: 38 76% 31%;
    --accent-muted: 38 51% 50% / 0.25;
    --accent-glow: 38 51% 50% / 0.45;
    --destructive: 0 84.2% 40.1%;
    --destructive-foreground: 60 9.1% 97.8%;
    --border: 220 13% 82%;          /* More visible (was 90%) */
    --input: 220 13% 82%;           /* Match border */
    --ring: 172 66% 35%;              /* Teal focus ring - darker for visibility */
    --radius: 0.5rem;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    --sidebar-background: 220 14% 94%;  /* Differentiated (was 98%) */
    --sidebar-foreground: 240 5.3% 26.1%;
    --sidebar-primary: 172 66% 28%;      /* Teal - WCAG AA */
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 240 4.8% 95.9%;
    --sidebar-accent-foreground: 240 5.9% 10%;
    --sidebar-border: 220 13% 82%;      /* Match border */
    --sidebar-ring: 172 66% 35%;
    --sidebar-active-indicator: 172 66% 35%;  /* Teal bar for active nav item */

    /* ═══════════════════════════════════════════════════════════════
       SEMANTIC COLORS (Aliases → Base)
       ═══════════════════════════════════════════════════════════════ */
    /* Atom type colors */
    --atom-problem: var(--color-red);
    --atom-solution: var(--color-green);
    --atom-decision: var(--color-blue);
    --atom-question: var(--color-amber);
    --atom-insight: var(--color-purple);
    --atom-pattern: var(--color-indigo);  /* Was cyan, now indigo for teal separation */
    --atom-requirement: var(--color-violet);
    /* Status indicator colors */
    --status-connected: var(--color-green);
    --status-validating: var(--color-blue);
    --status-pending: var(--color-amber);
    --status-error: var(--color-red);
    /* Semantic feedback colors */
    --semantic-success: var(--color-green);
    --semantic-warning: var(--color-amber);
    --semantic-error: var(--color-red);
    --semantic-info: var(--color-blue);

    /* ═══════════════════════════════════════════════════════════════
       CARD TYPOGRAPHY COLORS - WCAG AA Compliant
       Based on Material Design 3 contrast principles
       All values tested against white card background (#FFFFFF)
       ═══════════════════════════════════════════════════════════════ */
    --card-title: var(--foreground);         /* 19.4:1 - Primary heading */
    --card-body: 220 12% 26%;                /* 10.5:1 - Body text, APCA Lc~88 */
    --card-label: 220 8% 38%;                /* 6.5:1  - Field labels (uppercase) */
    --card-value: 220 14% 20%;               /* 13.4:1 - Data values (emphasis) */
    --card-muted: 220 6% 42%;                /* 5.5:1  - Secondary info, min 14px */

    /* ═══════════════════════════════════════════════════════════════
       SHADOWS & EFFECTS
       ═══════════════════════════════════════════════════════════════ */
    --shadow-color: 222.2 47.4% 11.2%;
    --shadow-card: 0 2px 8px hsl(var(--shadow-color) / 0.08),
                   0 1px 3px hsl(var(--shadow-color) / 0.05);  /* Stronger */

    /* ═══════════════════════════════════════════════════════════════
       CHART & VISUALIZATION
       ═══════════════════════════════════════════════════════════════ */
    --heatmap-telegram: 200 80% 50%;
    --heatmap-slack: 280 70% 50%;
    --heatmap-email: 140 70% 45%;
    --chart-signal: var(--color-green);
    --chart-noise: var(--color-red);
    --chart-weak-signal: var(--color-amber);
    /* Brand */
    --brand-telegram: 200 80% 50%;
    /* Topic Default */
    --topic-default: 231 65% 61%;
    /* Search Highlight */
    --highlight: 43 96% 72%;
    /* Heatmap Activity Levels (5 levels: 0-4) */
    --heatmap-level-0: 0 0% 93%;
    --heatmap-level-1: 142 76% 80%;
    --heatmap-level-2: 142 76% 60%;
    --heatmap-level-3: 142 76% 45%;
    --heatmap-level-4: 142 76% 35%;
  }

  .dark {
    /* ═══════════════════════════════════════════════════════════════
       BASE COLORS (Source of Truth) - Dark Mode (brighter for dark bg)
       ═══════════════════════════════════════════════════════════════ */
    --color-green: 130 65% 59%;       /* Shifted from 142° to match light mode */
    --color-red: 0 78% 65%;
    --color-blue: 217 85% 62%;
    --color-amber: 38 92% 60%;
    --color-purple: 280 65% 68%;
    --color-cyan: 197 71% 56%;
    --color-violet: 260 65% 66%;
    --color-indigo: 230 65% 60%;      /* Brighter for dark mode */

    /* ═══════════════════════════════════════════════════════════════
       DARK THEME - Elevation & Structure
       ═══════════════════════════════════════════════════════════════ */
    --background: 20 14.3% 4.1%;
    --foreground: 60 9.1% 97.8%;
    --card: 20 14.3% 4.1%;
    --card-foreground: 60 9.1% 97.8%;
    --popover: 20 14.3% 4.1%;
    --popover-foreground: 60 9.1% 97.8%;
    --primary: 172 66% 38%;            /* Teal - WCAG AA compliant for white text */
    --primary-foreground: 0 0% 100%;   /* White text - 4.5:1 contrast */
    --primary-bright: 172 66% 45%;     /* Active nav/tabs - balanced visibility */
    --secondary: 12 6.5% 15.1%;
    --secondary-foreground: 60 9.1% 97.8%;
    --muted: 12 6.5% 15.1%;
    --muted-foreground: 24 5.4% 63.9%;
    --accent: 38 55% 55%;
    --accent-foreground: 60 9.1% 97.8%;
    --accent-light: 38 60% 65%;
    --accent-dark: 38 70% 40%;
    --accent-muted: 38 55% 55% / 0.25;
    --accent-glow: 38 55% 55% / 0.5;
    --destructive: 0 72.2% 50.6%;
    --destructive-foreground: 60 9.1% 97.8%;
    --border: 12 6.5% 15.1%;
    --input: 12 6.5% 15.1%;
    --ring: 172 66% 40%;               /* Teal focus ring - visible on dark bg */
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
    --sidebar-background: 20 14.3% 4.1%;
    --sidebar-foreground: 240 4.8% 95.9%;
    --sidebar-primary: 172 66% 38%;      /* Teal - WCAG AA */
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 240 3.7% 15.9%;
    --sidebar-accent-foreground: 240 4.8% 95.9%;
    --sidebar-border: 240 3.7% 15.9%;
    --sidebar-ring: 172 66% 40%;
    --sidebar-active-indicator: 172 66% 40%;  /* Teal bar for active nav item */

    /* Semantic colors inherit from base (defined above) */

    /* ═══════════════════════════════════════════════════════════════
       CARD TYPOGRAPHY COLORS - Dark Mode (WCAG AA Compliant)
       All values tested against dark card background (#0D0B09)
       ═══════════════════════════════════════════════════════════════ */
    --card-title: var(--foreground);         /* 18.5:1 - Primary heading */
    --card-body: 220 6% 82%;                 /* 12.5:1 - Body text, APCA Lc~90 */
    --card-label: 220 5% 72%;                /* 8.8:1  - Field labels */
    --card-value: 220 6% 90%;                /* 15.8:1 - Data values (emphasis) */
    --card-muted: 220 5% 68%;                /* 7.6:1  - Secondary info, min 14px */

    /* ═══════════════════════════════════════════════════════════════
       SHADOWS & EFFECTS - Dark Mode
       ═══════════════════════════════════════════════════════════════ */
    --shadow-color: 210 40% 98%;
    --shadow-card: 0 1px 3px hsl(var(--shadow-color) / 0.04),
                   0 1px 2px hsl(var(--shadow-color) / 0.02);

    /* ═══════════════════════════════════════════════════════════════
       CHART & VISUALIZATION - Dark Mode
       ═══════════════════════════════════════════════════════════════ */
    --heatmap-telegram: 200 80% 60%;
    --heatmap-slack: 280 70% 60%;
    --heatmap-email: 140 70% 55%;
    /* Brand */
    --brand-telegram: 200 80% 60%;
    /* Topic Default - lighter for dark mode */
    --topic-default: 231 65% 71%;
    /* Search Highlight - darker bg for dark mode readability */
    --highlight: 43 96% 35%;
    /* Heatmap Activity Levels (5 levels: 0-4) - adjusted for dark mode */
    --heatmap-level-0: 0 0% 18%;
    --heatmap-level-1: 142 50% 25%;
    --heatmap-level-2: 142 60% 35%;
    --heatmap-level-3: 142 70% 45%;
    --heatmap-level-4: 142 76% 55%;
  }
}

@layer base {
  /* ═══════════════════════════════════════════════════════════════
     CUSTOM SCROLLBAR
     ═══════════════════════════════════════════════════════════════ */

  /* Webkit browsers (Chrome, Safari, Edge) */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: hsl(var(--muted-foreground) / 0.3);
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--muted-foreground) / 0.5);
  }

  /* Firefox */
  * {
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--muted-foreground) / 0.3) transparent;
  }

  /* Dark theme - darker scrollbar */
  .dark ::-webkit-scrollbar-thumb {
    background: hsl(var(--muted-foreground) / 0.2);
  }

  .dark ::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--muted-foreground) / 0.4);
  }

  .dark * {
    scrollbar-color: hsl(var(--muted-foreground) / 0.2) transparent;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-family: 'Raleway', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    letter-spacing: 0.015em;
  }
}

@layer base {
  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      transition-duration: 0.01ms !important;
    }
  }
}

@layer components {
  /*
   * Focus styles handled by Tailwind ring utilities in components.
   * shadcn/ui components use focus-visible:ring-2 focus-visible:ring-ring.
   * No global outline - prevents double focus indicators.
   */

  /**
   * Interactive Card Pattern
   *
   * Use for cards with click handlers. Applies:
   * - Ambient glow shadow at rest
   * - Enhanced glow on hover
   * - Smooth transition
   * - Pointer cursor
   *
   * @example
   * <Card className="card-interactive" onClick={handleClick}>
   *   ...
   * </Card>
   */
  .card-interactive {
    @apply shadow-glow hover:shadow-glow-hover transition-all duration-300 cursor-pointer;
  }
}

/* Logo animations - Smooth Rotation & Pulse */
@keyframes ring-rotate {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes pulse-core {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(0.85); opacity: 0.8; }
}

@keyframes pulse-glow {
  0%, 100% { opacity: 0.5; transform: scale(1); }
  50% { opacity: 0.2; transform: scale(0.9); }
}

/* Logo base styles */
.logo-ring {
  transform-origin: 16px 16px;
  will-change: transform;
}

.logo-core {
  transform-origin: 16px 16px;
  will-change: transform, opacity;
}

/* Animating states */
.logo-container:hover .logo-ring,
.logo-svg.animating .logo-ring {
  animation: ring-rotate 8s linear infinite;
}

.logo-container:hover .logo-core,
.logo-svg.animating .logo-core {
  animation: pulse-core 2s ease-in-out infinite;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .logo-ring,
  .logo-core {
    animation: none !important;
  }
}
